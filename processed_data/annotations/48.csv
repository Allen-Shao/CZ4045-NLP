,text,token,annotation
0,// global handler for our DB,['// global handler for our DB'],"['comment', 'global', 'handler', 'for', 'our', 'DB']"
1,var db *sql.DB,"['var', 'db', '*', 'sql', '.', 'DB']","['keyword', 'identifier', 'operator', 'identifier', 'operator', 'identifier']"
2,// CLI parameter,['// CLI parameter'],"['comment', 'CLI', 'parameter']"
3,var dbdsn string,"['var', 'dbdsn', 'string']","['keyword', 'identifier', 'identifier']"
4,func init() {,"['func', 'init', '()', '{']","['keyword', 'identifier', 'operator', 'operator']"
5,"    flag.StringVar(&dbdsn, ""dbdsn"", ""root:root@tcp(localhost:3306)/prod?timeout=5s&tls=false&autocommit=true"", ""Specifies the MySql DSN connection."")","['flag', '.', 'StringVar', '(&', 'dbdsn', ',', '""dbdsn"", ""root:root@tcp(localhost:3306)/prod?timeout=5s&tls=false&autocommit=true"", ""Specifies the MySql DSN connection.""', ')']","['identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'string_literal', 'operator']"
6,    flag.Parse(),"['flag', '.', 'Parse', '()']","['identifier', 'operator', 'identifier', 'operator']"
7,    var err error,"['var', 'err', 'error']","['keyword', 'identifier', 'identifier']"
8,"    db, err = sql.Open(""mysql"", dbdsn)","['db', ',', 'err', '=', 'sql', '.', 'Open', '(', '""mysql""', ',', 'dbdsn', ')']","['identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'string_literal', 'operator', 'identifier', 'operator']"
9,    if err != nil {,"['if', 'err', '!=', 'nil', '{']","['keyword', 'identifier', 'operator', 'identifier', 'operator']"
10,"        log.Printf(""ERROR in sql.Open(): %v"", err)","['log', '.', 'Printf', '(', '""ERROR in sql.Open(): %v""', ',', 'err', ')']","['identifier', 'operator', 'identifier', 'operator', 'string_literal', 'operator', 'identifier', 'operator']"
11,    },['}'],['operator']
12,    //db.SetMaxIdleConns(5),['//db.SetMaxIdleConns(5)'],"['comment', 'db.SetMaxIdleConns', '(', '5', ')']"
13,    // verify the DSN is setup properly1,['// verify the DSN is setup properly1'],"['comment', 'verify', 'the', 'DSN', 'is', 'setup', 'properly1']"
14,    err = db.Ping(),"['err', '=', 'db', '.', 'Ping', '()']","['identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator']"
15,    if err != nil {,"['if', 'err', '!=', 'nil', '{']","['keyword', 'identifier', 'operator', 'identifier', 'operator']"
16,"        panic(""PANIC when pinging db: "" + err.Error()) // proper error handling instead of panic in your app","['panic', '(', '""PANIC when pinging db: ""', '+', 'err', '.', 'Error', '())', '// proper error handling instead of panic in your app']","['identifier', 'operator', 'string_literal', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'comment', 'proper', 'error', 'handling', 'instead', 'of', 'panic', 'in', 'your', 'app']"
17,    },['}'],['operator']
18,},['}'],['operator']
19,// **********,['// **********'],"['comment', '**********']"
20,// * omitted is the Gorilla MUX router and http handler registrations,['// * omitted is the Gorilla MUX router and http handler registrations'],"['comment', '*', 'omitted', 'is', 'the', 'Gorilla', 'MUX', 'router', 'and', 'http', 'handler', 'registrations']"
21,// **********,['// **********'],"['comment', '**********']"
22,"func ArticleHandler(w http.ResponseWriter, r *http.Request, c *Context) (err error) {","['func', 'ArticleHandler', '(', 'w', 'http', '.', 'ResponseWriter', ',', 'r', '*', 'http', '.', 'Request', ',', 'c', '*', 'Context', ')', '(', 'err', 'error', ')', '{']","['keyword', 'identifier', 'operator', 'identifier', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'operator', 'identifier', 'identifier', 'operator', 'operator']"
23,    m := NewArticle(c),"['m', ':=', 'NewArticle', '(', 'c', ')']","['identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator']"
24,"    id := c.Vars[""id""]","['id', ':=', 'c', '.', 'Vars', '[', '""id""', ']']","['identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'string_literal', 'operator']"
25,    var pid int,"['var', 'pid', 'int']","['keyword', 'identifier', 'identifier']"
26,"    var title, body, excerpt, date, slug, fi, fv, region, region_slug string","['var', 'title', ',', 'body', ',', 'excerpt', ',', 'date', ',', 'slug', ',', 'fi', ',', 'fv', ',', 'region', ',', 'region_slug', 'string']","['keyword', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'identifier']"
27,    err = db.QueryRow(,"['err', '=', 'db', '.', 'QueryRow', '(']","['identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator']"
28,"        ""SELECT p.ID, p.post_title, p.post_content, p.post_excerpt, p.post_date, p.post_name, ""+","['""SELECT p.ID, p.post_title, p.post_content, p.post_excerpt, p.post_date, p.post_name, ""', '+']","['string_literal', 'operator']"
29,"            ""(SELECT fpim.meta_value FROM wp_postmeta fpim WHERE fpim.meta_key = '_wp_attached_file' AND fpim.post_id = (SELECT fpim2.meta_value FROM wp_postmeta fpim2 WHERE fpim2.post_id = p.ID AND fpim2.meta_key = '_thumbnail_id' LIMIT 1) LIMIT 1) AS featured_image, ""+","['""(SELECT fpim.meta_value FROM wp_postmeta fpim WHERE fpim.meta_key = \'_wp_attached_file\' AND fpim.post_id = (SELECT fpim2.meta_value FROM wp_postmeta fpim2 WHERE fpim2.post_id = p.ID AND fpim2.meta_key = \'_thumbnail_id\' LIMIT 1) LIMIT 1) AS featured_image, ""', '+']","['string_literal', 'operator']"
30,"            ""(SELECT fpim3.meta_value FROM wp_postmeta fpim3 WHERE fpim3.meta_key = 'fv_video' AND fpim3.post_id = p.ID LIMIT 1) AS featured_video, ""+","['""(SELECT fpim3.meta_value FROM wp_postmeta fpim3 WHERE fpim3.meta_key = \'fv_video\' AND fpim3.post_id = p.ID LIMIT 1) AS featured_video, ""', '+']","['string_literal', 'operator']"
31,"            ""t.name as region, t.slug as region_slug ""+","['""t.name as region, t.slug as region_slug ""', '+']","['string_literal', 'operator']"
32,"            ""FROM wp_posts p ""+","['""FROM wp_posts p ""', '+']","['string_literal', 'operator']"
33,"            ""JOIN wp_term_relationships tr ON tr.object_id=p.ID ""+","['""JOIN wp_term_relationships tr ON tr.object_id=p.ID ""', '+']","['string_literal', 'operator']"
34,"            ""JOIN wp_term_taxonomy tt ON tt.term_taxonomy_id=tr.term_taxonomy_id ""+","['""JOIN wp_term_taxonomy tt ON tt.term_taxonomy_id=tr.term_taxonomy_id ""', '+']","['string_literal', 'operator']"
35,"            ""JOIN wp_terms t ON t.term_id=tt.term_id ""+","['""JOIN wp_terms t ON t.term_id=tt.term_id ""', '+']","['string_literal', 'operator']"
36,"            ""WHERE p.post_name=? AND p.post_type='post' AND p.post_status='publish' AND p.post_date <= UTC_TIMESTAMP()""+","['""WHERE p.post_name=? AND p.post_type=\'post\' AND p.post_status=\'publish\' AND p.post_date <= UTC_TIMESTAMP()""', '+']","['string_literal', 'operator']"
37,"            ""AND tr.object_id=p.ID AND tt.parent = (SELECT t3.term_id FROM wp_terms t3 WHERE t3.name=? LIMIT 1) LIMIT 1"",","['""AND tr.object_id=p.ID AND tt.parent = (SELECT t3.term_id FROM wp_terms t3 WHERE t3.name=? LIMIT 1) LIMIT 1""', ',']","['string_literal', 'operator']"
38,"        id, RegionsParentCategory).","['id', ',', 'RegionsParentCategory', ').']","['identifier', 'operator', 'identifier', 'operator']"
39,"        Scan(&pid, &title, &body, &excerpt, &date, &slug, &fi, &fv, ®ion, ®ion_slug)","['Scan', '(&', 'pid', ',', '&', 'title', ',', '&', 'body', ',', '&', 'excerpt', ',', '&', 'date', ',', '&', 'slug', ',', '&', 'fi', ',', '&', 'fv', ',', 'ion', ',', 'ion_slug', ')']","['identifier', 'operator', 'identifier', 'operator', 'operator', 'identifier', 'operator', 'operator', 'identifier', 'operator', 'operator', 'identifier', 'operator', 'operator', 'identifier', 'operator', 'operator', 'identifier', 'operator', 'operator', 'identifier', 'operator', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator']"
40,    if err != nil {,"['if', 'err', '!=', 'nil', '{']","['keyword', 'identifier', 'operator', 'identifier', 'operator']"
41,        if err == sql.ErrNoRows {,"['if', 'err', '==', 'sql', '.', 'ErrNoRows', '{']","['keyword', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator']"
42,            // snipped code for redirects,['// snipped code for redirects'],"['comment', 'snipped', 'code', 'for', 'redirects']"
43,            // article was not found,['// article was not found'],"['comment', 'article', 'was', 'not', 'found']"
44,"            return handleNotFound(w, r, c)","['return', 'handleNotFound', '(', 'w', ',', 'r', ',', 'c', ')']","['keyword', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator']"
45,        } else {,"['}', 'else', '{']","['operator', 'keyword', 'operator']"
46,"            log.Printf(""ERROR in .Scan(): %v"", err)","['log', '.', 'Printf', '(', '""ERROR in .Scan(): %v""', ',', 'err', ')']","['identifier', 'operator', 'identifier', 'operator', 'string_literal', 'operator', 'identifier', 'operator']"
47,        },['}'],['operator']
48,    } else {,"['}', 'else', '{']","['operator', 'keyword', 'operator']"
49,        m.Region = Region{,"['m', '.', 'Region', '=', 'Region', '{']","['identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator']"
50,"            Name: region,","['Name', ':', 'region', ',']","['identifier', 'operator', 'identifier', 'operator']"
51,"            Slug: region_slug,","['Slug', ':', 'region_slug', ',']","['identifier', 'operator', 'identifier', 'operator']"
52,        },['}'],['operator']
53,        m.Id = pid,"['m', '.', 'Id', '=', 'pid']","['identifier', 'operator', 'identifier', 'operator', 'identifier']"
54,        m.Title = title,"['m', '.', 'Title', '=', 'title']","['identifier', 'operator', 'identifier', 'operator', 'identifier']"
55,        m.Body = template.HTML(body) // render the raw html,"['m', '.', 'Body', '=', 'template', '.', 'HTML', '(', 'body', ')', '// render the raw html']","['identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'comment', 'render', 'the', 'raw', 'html']"
56,        m.Excerpt = excerpt,"['m', '.', 'Excerpt', '=', 'excerpt']","['identifier', 'operator', 'identifier', 'operator', 'identifier']"
57,        m.Datetime = date,"['m', '.', 'Datetime', '=', 'date']","['identifier', 'operator', 'identifier', 'operator', 'identifier']"
58,        m.Slug = slug,"['m', '.', 'Slug', '=', 'slug']","['identifier', 'operator', 'identifier', 'operator', 'identifier']"
59,        m.FeaturedImageUrl = fi,"['m', '.', 'FeaturedImageUrl', '=', 'fi']","['identifier', 'operator', 'identifier', 'operator', 'identifier']"
60,        m.FeaturedVideoUrl = fv,"['m', '.', 'FeaturedVideoUrl', '=', 'fv']","['identifier', 'operator', 'identifier', 'operator', 'identifier']"
61,    },['}'],['operator']
62,"    web.RenderTemplate(w, ""article"", m)","['web', '.', 'RenderTemplate', '(', 'w', ',', '""article""', ',', 'm', ')']","['identifier', 'operator', 'identifier', 'operator', 'identifier', 'operator', 'string_literal', 'operator', 'identifier', 'operator']"
63,    return,['return'],['keyword']
64,},['}'],['operator']
