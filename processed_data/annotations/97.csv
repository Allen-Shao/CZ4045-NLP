,text,token,annotation
0,"I've got a function that relies on checking some errors concurrently and I'm trying to use waitgroups to wait until all processes that return possible errors are done before I check all the errors. 

It seems to be skipping some of the wg.Done() cals. Here's a youtube video of the debug (it loops through the 'for' loop 3 times, sorry):
Golang Delve Debug for WaitGroups

Any idea why it'd be skipping some of the waitgroup.Done() calls?

Here's the code:

","[""I've"", 'got', 'a', 'function', 'that', 'relies', 'on', 'checking', 'some', 'errors', 'concurrently', 'and', ""I'm"", 'trying', 'to', 'use', 'waitgroups', 'to', 'wait', 'until', 'all', 'processes', 'that', 'return', 'possible', 'errors', 'are', 'done', 'before', 'I', 'check', 'all', 'the', 'errors.', 'It', 'seems', 'to', 'be', 'skipping', 'some', 'of', 'the', 'wg.Done()', 'cals.', ""Here's"", 'a', 'youtube', 'video', 'of', 'the', 'debug', '(it', 'loops', 'through', 'the', ""'for'"", 'loop', '3', 'times,', 'sorry):', 'Golang', 'Delve', 'Debug', 'for', 'WaitGroups', 'Any', 'idea', 'why', ""it'd"", 'be', 'skipping', 'some', 'of', 'the', 'waitgroup.Done()', 'calls?', ""Here's"", 'the', 'code:']","['NNP', 'VBD', 'DT', 'NN', 'WDT', 'VBZ', 'IN', 'VBG', 'DT', 'NNS', 'RB', 'CC', 'NNP', 'VBG', 'TO', 'VB', 'NNS', 'TO', 'VB', 'IN', 'DT', 'NNS', 'WDT', 'VBP', 'JJ', 'NNS', 'VBP', 'VBN', 'IN', 'PRP', 'VBP', 'PDT', 'DT', 'NN', 'PRP', 'VBZ', 'TO', 'VB', 'VBG', 'DT', 'IN', 'DT', 'NN', 'NN', 'NNP', 'DT', 'JJ', 'NN', 'IN', 'DT', 'NN', 'NN', 'VBZ', 'IN', 'DT', 'NNP', 'VBD', 'CD', 'NN', 'NN', 'NNP', 'NNP', 'NNP', 'IN', 'NNP', 'NNP', 'NN', 'WRB', 'NN', 'VB', 'VBG', 'DT', 'IN', 'DT', 'NN', 'NN', 'NNP', 'DT', 'NN']"
1,package controllers,"['package', 'controllers']","['KEYWORD', 'IDENTIFIER']"
2,import (,"['import', '(']","['KEYWORD', 'PUNCTUATION']"
3,"    ""errors""","['""errors""']",['STRING_LITERAL']
4,"    ""mobilebid/billable""","['""mobilebid/billable""']",['STRING_LITERAL']
5,"    db ""mobilebid/database""","['db', '""mobilebid/database""']","['IDENTIFIER', 'STRING_LITERAL']"
6,"    ""mobilebid/stripe""","['""mobilebid/stripe""']",['STRING_LITERAL']
7,"    ""net/http""","['""net/http""']",['STRING_LITERAL']
8,"    ""os""","['""os""']",['STRING_LITERAL']
9,"    ""strconv""","['""strconv""']",['STRING_LITERAL']
10,"    ""sync""","['""sync""']",['STRING_LITERAL']
11,"    ""time""","['""time""']",['STRING_LITERAL']
12,"    log ""github.com/Sirupsen/logrus""","['log', '""github.com/Sirupsen/logrus""']","['IDENTIFIER', 'STRING_LITERAL']"
13,"    ""github.com/gorilla/mux""","['""github.com/gorilla/mux""']",['STRING_LITERAL']
14,),[')'],['PUNCTUATION']
15,var (,"['var', '(']","['KEYWORD', 'PUNCTUATION']"
16,"    errBillableID     = errors.New(""It looks like there was an error while getting your billable ID. Do you have a credit card set up?"")","['errBillableID', '=', 'errors.New(""It looks like there was an error while getting your billable ID. Do you have a credit card set up?"")']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
17,"    errWinningItems   = errors.New(""It looks like there was an error while gathering your winning items. Please contact an event rep."")","['errWinningItems', '=', 'errors.New(""It looks like there was an error while gathering your winning items. Please contact an event rep."")']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
18,"    errAcctInfo       = errors.New(""We had some trouble getting the account information for the event. Please contact an event rep."")","['errAcctInfo', '=', 'errors.New(""We had some trouble getting the account information for the event. Please contact an event rep."")']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
19,"    errLoggingTrans   = errors.New(""It looks like we had some sort of issue while logging your transaction. Please contact an event rep."")","['errLoggingTrans', '=', 'errors.New(""It looks like we had some sort of issue while logging your transaction. Please contact an event rep."")']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
20,"    errParsingURL     = errors.New(""We had some issue looking at the URL."")","['errParsingURL', '=', 'errors.New(""We had some issue looking at the URL."")']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
21,"    errStripeIssue    = errors.New(""It looks like there was some kind of issue while talking with Stripe. If you were in the middle of a transaction, this doesn't mean the transaction was cancelled. Take a look at your transactions and/or contact an event rep."")","['errStripeIssue', '=', 'errors.New(""It looks like there was some kind of issue while talking with Stripe. If you were in the middle of a transaction, this doesn\'t mean the transaction was cancelled. Take a look at your transactions and/or contact an event rep."")']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
22,"    errItemsPurchased = errors.New(""One or more of the items you're trying to purchase have already been purchased. If this doesn't sound right, please contact an event rep."")","['errItemsPurchased', '=', 'errors.New(""One or more of the items you\'re trying to purchase have already been purchased. If this doesn\'t sound right, please contact an event rep."")']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
23,),[')'],['PUNCTUATION']
24,"func createLogCtx(bidderID, eventID int) *log.Entry {","['func', 'createLogCtx', '(', 'bidderID', ',', 'eventID', 'int', ')', '*', 'log', '.', 'Entry', '{']","['KEYWORD', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'IDENTIFIER', 'PUNCTUATION', 'POINTER_OPERATOR', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
25,    return log.WithFields(log.Fields{,"['return', 'log', '.', 'WithFields', '(', 'log', '.', 'Fields', '{']","['KEYWORD', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
26,"        ""bidderID"": bidderID,","['""bidderID""', ':', 'bidderID', ',']","['STRING_LITERAL', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
27,"        ""eventID"":  eventID,","['""eventID""', ':', 'eventID', ',']","['STRING_LITERAL', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
28,    }),['})'],['PUNCTUATION']
29,},['}'],['PUNCTUATION']
30,var wg sync.WaitGroup,"['var', 'wg', 'sync', '.', 'WaitGroup']","['KEYWORD', 'IDENTIFIER', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER']"
31,const gorutineCt = 6,"['const', 'go', 'rutineCt', '=', '6']","['KEYWORD', 'KEYWORD', 'IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'DECIMAL_LITERAL']"
32,//PurchaseItems purchases items from the event for the bidder and sends the funds to the customer,"['//', 'PurchaseItems', 'purchases', 'items', 'from', 'the', 'event', 'for', 'the', 'bidder', 'and', 'sends', 'the', 'funds', 'to', 'the', 'customer']","['COMMENT', 'NNP', 'NNS', 'NNS', 'IN', 'DT', 'NN', 'IN', 'DT', 'NN', 'CC', 'VBZ', 'DT', 'NNS', 'TO', 'DT', 'NN']"
33,//  In order for PurchaseItems to work:,"['//', 'In', 'order', 'for', 'PurchaseItems', 'to', 'work:']","['COMMENT', 'IN', 'NN', 'IN', 'NNPS', 'TO', 'VB']"
34,//      1. Bidder must have a customer account set up in Stripe,"['//', '1.', 'Bidder', 'must', 'have', 'a', 'customer', 'account', 'set', 'up', 'in', 'Stripe']","['COMMENT', 'CD', 'NNP', 'MD', 'VB', 'DT', 'NN', 'NN', 'VBN', 'RP', 'IN', 'NNP']"
35,//      2. Event owner needs to have their Stripe registered with the apps Stripe account,"['//', '2.', 'Event', 'owner', 'needs', 'to', 'have', 'their', 'Stripe', 'registered', 'with', 'the', 'apps', 'Stripe', 'account']","['COMMENT', 'CD', 'NNP', 'NN', 'NNS', 'TO', 'VB', 'PRP$', 'NNP', 'VBN', 'IN', 'DT', 'NN', 'NNP', 'NN']"
36,//      3. Item must not have been purchased before (ever),"['//', '3.', 'Item', 'must', 'not', 'have', 'been', 'purchased', 'before', '(ever)']","['COMMENT', 'CD', 'NNP', 'MD', 'RB', 'VB', 'VBN', 'VBN', 'IN', 'NN']"
37,func PurchaseItems(dB db.AppDB) http.HandlerFunc {,"['func', 'PurchaseItems', '(', 'dB', 'db', '.', 'AppDB', ')', 'http', '.', 'HandlerFunc', '{']","['KEYWORD', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
38,"    return http.HandlerFunc(func(res http.ResponseWriter, req *http.Request) {","['return', 'http.HandlerFunc(func(res http.ResponseWriter, req *http.Request)', '{']","['KEYWORD', 'FUNCTION_CALL', 'PUNCTUATION']"
39,        ps := mux.Vars(req),"['ps', ':=', 'mux.Vars(req)']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
40,"        eventID, err := strconv.Atoi(ps[""eventID""])","['eventID', ',', 'err', ':=', 'strconv.Atoi(ps[""eventID""])']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
41,        if err != nil {,"['if', 'err', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'RELATION_OPERATOR', 'IDENTIFIER', 'PUNCTUATION']"
42,            log.Error(err.Error()),['log.Error(err.Error())'],['FUNCTION_CALL']
43,            res.Write(ResErr(errParsingURL.Error())),['res.Write(ResErr(errParsingURL.Error()))'],['FUNCTION_CALL']
44,            return,['return'],['KEYWORD']
45,        },['}'],['PUNCTUATION']
46,"        bidderID, err := strconv.Atoi(ps[""bidderID""])","['bidderID', ',', 'err', ':=', 'strconv.Atoi(ps[""bidderID""])']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
47,        if err != nil {,"['if', 'err', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'RELATION_OPERATOR', 'IDENTIFIER', 'PUNCTUATION']"
48,            log.Error(err.Error()),['log.Error(err.Error())'],['FUNCTION_CALL']
49,            res.Write(ResErr(errParsingURL.Error())),['res.Write(ResErr(errParsingURL.Error()))'],['FUNCTION_CALL']
50,            return,['return'],['KEYWORD']
51,        },['}'],['PUNCTUATION']
52,        itemsChan := make(chan []db.ItemWon),"['itemsChan', ':=', 'make', '(', 'chan', '[]', 'db', '.', 'ItemWon', ')']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'IDENTIFIER', 'PUNCTUATION', 'KEYWORD', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
53,        billableBidderIDChan := make(chan string),"['billableBidderIDChan', ':=', 'make', '(', 'chan', 'string', ')']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'IDENTIFIER', 'PUNCTUATION', 'KEYWORD', 'IDENTIFIER', 'PUNCTUATION']"
54,        creditableAcctChan := make(chan string),"['creditableAcctChan', ':=', 'make', '(', 'chan', 'string', ')']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'IDENTIFIER', 'PUNCTUATION', 'KEYWORD', 'IDENTIFIER', 'PUNCTUATION']"
55,"        errsChan := make(chan error, gorutineCt)","['errsChan', ':=', 'make', '(', 'chan', 'error', ',', 'go', 'rutineCt', ')']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'IDENTIFIER', 'PUNCTUATION', 'KEYWORD', 'IDENTIFIER', 'PUNCTUATION', 'KEYWORD', 'IDENTIFIER', 'PUNCTUATION']"
56,        wg.Add(gorutineCt),['wg.Add(gorutineCt)'],['FUNCTION_CALL']
57,"        logCtx := createLogCtx(bidderID, eventID)","['logCtx', ':=', 'createLogCtx', '(', 'bidderID', ',', 'eventID', ')']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
58,"        acct := stripe.New(os.Getenv(""SECRET_KEY""), os.Getenv(""PUBLISHABLE_KEY""))","['acct', ':=', 'stripe.New(os.Getenv(""SECRET_KEY""), os.Getenv(""PUBLISHABLE_KEY""))']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
59,        go func() {,"['go', 'func', '()', '{']","['KEYWORD', 'KEYWORD', 'PUNCTUATION', 'PUNCTUATION']"
60,"            id, e := dB.GetBidderBillableID(bidderID)","['id', ',', 'e', ':=', 'dB.GetBidderBillableID(bidderID)']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
61,            if e != nil {,"['if', 'e', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'RELATION_OPERATOR', 'IDENTIFIER', 'PUNCTUATION']"
62,                logCtx.Error(e.Error()),['logCtx.Error(e.Error())'],['FUNCTION_CALL']
63,                errsChan <- errBillableID,"['errsChan', '<-', 'errBillableID']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
64,                billableBidderIDChan <- id,"['billableBidderIDChan', '<-', 'id']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
65,            } else {,"['}', 'else', '{']","['PUNCTUATION', 'KEYWORD', 'PUNCTUATION']"
66,                errsChan <- nil,"['errsChan', '<-', 'nil']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
67,                billableBidderIDChan <- id,"['billableBidderIDChan', '<-', 'id']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
68,            },['}'],['PUNCTUATION']
69,            wg.Done(),['wg.Done()'],['FUNCTION_CALL']
70,        }(),['}()'],['PUNCTUATION']
71,        go func() {,"['go', 'func', '()', '{']","['KEYWORD', 'KEYWORD', 'PUNCTUATION', 'PUNCTUATION']"
72,"            i, e := dB.GetWinningItemsForBidder(bidderID, eventID)","['i', ',', 'e', ':=', 'dB.GetWinningItemsForBidder(bidderID, eventID)']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
73,            if e != nil {,"['if', 'e', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'RELATION_OPERATOR', 'IDENTIFIER', 'PUNCTUATION']"
74,                logCtx.Error(e.Error()),['logCtx.Error(e.Error())'],['FUNCTION_CALL']
75,                errsChan <- errWinningItems,"['errsChan', '<-', 'errWinningItems']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
76,                itemsChan <- i,"['itemsChan', '<-', 'i']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
77,            } else {,"['}', 'else', '{']","['PUNCTUATION', 'KEYWORD', 'PUNCTUATION']"
78,                errsChan <- nil,"['errsChan', '<-', 'nil']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
79,                itemsChan <- i,"['itemsChan', '<-', 'i']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
80,            },['}'],['PUNCTUATION']
81,            wg.Done(),['wg.Done()'],['FUNCTION_CALL']
82,        }(),['}()'],['PUNCTUATION']
83,        go func() {,"['go', 'func', '()', '{']","['KEYWORD', 'KEYWORD', 'PUNCTUATION', 'PUNCTUATION']"
84,"            a, e := dB.GetCreditableAccountFromEvent(eventID)","['a', ',', 'e', ':=', 'dB.GetCreditableAccountFromEvent(eventID)']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
85,            if e != nil {,"['if', 'e', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'RELATION_OPERATOR', 'IDENTIFIER', 'PUNCTUATION']"
86,                logCtx.Error(e.Error()),['logCtx.Error(e.Error())'],['FUNCTION_CALL']
87,                errsChan <- errAcctInfo,"['errsChan', '<-', 'errAcctInfo']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
88,                creditableAcctChan <- a,"['creditableAcctChan', '<-', 'a']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
89,            } else {,"['}', 'else', '{']","['PUNCTUATION', 'KEYWORD', 'PUNCTUATION']"
90,                errsChan <- nil,"['errsChan', '<-', 'nil']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
91,                creditableAcctChan <- a,"['creditableAcctChan', '<-', 'a']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
92,            },['}'],['PUNCTUATION']
93,            wg.Done(),['wg.Done()'],['FUNCTION_CALL']
94,        }(),['}()'],['PUNCTUATION']
95,        go func() {,"['go', 'func', '()', '{']","['KEYWORD', 'KEYWORD', 'PUNCTUATION', 'PUNCTUATION']"
96,            items := <-itemsChan,"['items', ':=', '<-', 'itemsChan']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
97,"            for _, val := range items {","['for', '_', ',', 'val', ':=', 'range', 'items', '{']","['KEYWORD', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'KEYWORD', 'IDENTIFIER', 'PUNCTUATION']"
98,                e := dB.CheckIfItemPurchased(val.ItemID),"['e', ':=', 'dB.CheckIfItemPurchased(val.ItemID)']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
99,                if e != nil {,"['if', 'e', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'RELATION_OPERATOR', 'IDENTIFIER', 'PUNCTUATION']"
100,                    logCtx.WithFields(log.Fields{,"['logCtx', '.', 'WithFields', '(', 'log', '.', 'Fields', '{']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
101,"                        ""itemID"":     val.ItemID,","['""itemID""', ':', 'val', '.', 'ItemID', ',']","['STRING_LITERAL', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
102,"                        ""_timestamp"": time.Now(),","['""_timestamp""', ':', 'time.Now()', ',']","['STRING_LITERAL', 'PUNCTUATION', 'FUNCTION_CALL', 'PUNCTUATION']"
103,                    }).Error(e.Error()),"['}).', 'Error', '(', 'e.Error())']","['PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'FUNCTION_CALL']"
104,                    errsChan <- errItemsPurchased,"['errsChan', '<-', 'errItemsPurchased']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
105,                    itemsChan <- items,"['itemsChan', '<-', 'items']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
106,                    wg.Done(),['wg.Done()'],['FUNCTION_CALL']
107,                    return,['return'],['KEYWORD']
108,                },['}'],['PUNCTUATION']
109,            },['}'],['PUNCTUATION']
110,            errsChan <- nil,"['errsChan', '<-', 'nil']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
111,            itemsChan <- items,"['itemsChan', '<-', 'items']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
112,            wg.Done() //SKIPPED,"['wg.Done()', '//', 'SKIPPED']","['FUNCTION_CALL', 'COMMENT', 'NN']"
113,        }(),['}()'],['PUNCTUATION']
114,        go func() {,"['go', 'func', '()', '{']","['KEYWORD', 'KEYWORD', 'PUNCTUATION', 'PUNCTUATION']"
115,            billableBidderID := <-billableBidderIDChan,"['billableBidderID', ':=', '<-', 'billableBidderIDChan']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
116,            e := acct.BuyerIsBillable(billableBidderID),"['e', ':=', 'acct.BuyerIsBillable(billableBidderID)']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
117,            if e != nil {,"['if', 'e', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'RELATION_OPERATOR', 'IDENTIFIER', 'PUNCTUATION']"
118,                logCtx.Error(e.Error()),['logCtx.Error(e.Error())'],['FUNCTION_CALL']
119,                errsChan <- errStripeIssue,"['errsChan', '<-', 'errStripeIssue']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
120,                billableBidderIDChan <- billableBidderID,"['billableBidderIDChan', '<-', 'billableBidderID']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
121,            } else {,"['}', 'else', '{']","['PUNCTUATION', 'KEYWORD', 'PUNCTUATION']"
122,                errsChan <- nil,"['errsChan', '<-', 'nil']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
123,                billableBidderIDChan <- billableBidderID,"['billableBidderIDChan', '<-', 'billableBidderID']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
124,            },['}'],['PUNCTUATION']
125,            wg.Done(),['wg.Done()'],['FUNCTION_CALL']
126,        }(),['}()'],['PUNCTUATION']
127,        go func() {,"['go', 'func', '()', '{']","['KEYWORD', 'KEYWORD', 'PUNCTUATION', 'PUNCTUATION']"
128,            creditableAcct := <-creditableAcctChan,"['creditableAcct', ':=', '<-', 'creditableAcctChan']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
129,            e := acct.CanReceiveFunds(creditableAcct),"['e', ':=', 'acct.CanReceiveFunds(creditableAcct)']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
130,            if e != nil {,"['if', 'e', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'RELATION_OPERATOR', 'IDENTIFIER', 'PUNCTUATION']"
131,                logCtx.Error(e.Error()),['logCtx.Error(e.Error())'],['FUNCTION_CALL']
132,                errsChan <- errStripeIssue,"['errsChan', '<-', 'errStripeIssue']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
133,                creditableAcctChan <- creditableAcct,"['creditableAcctChan', '<-', 'creditableAcct']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
134,            } else {,"['}', 'else', '{']","['PUNCTUATION', 'KEYWORD', 'PUNCTUATION']"
135,                errsChan <- nil,"['errsChan', '<-', 'nil']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
136,                creditableAcctChan <- creditableAcct,"['creditableAcctChan', '<-', 'creditableAcct']","['IDENTIFIER', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
137,            },['}'],['PUNCTUATION']
138,            wg.Done(),['wg.Done()'],['FUNCTION_CALL']
139,        }(),['}()'],['PUNCTUATION']
140,        wg.Wait(),['wg.Wait()'],['FUNCTION_CALL']
141,        close(errsChan),"['close', '(', 'errsChan', ')']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
142,        if err = checkConcurrentErrs(errsChan); err != nil {,"['if', 'err', '=', 'checkConcurrentErrs', '(', 'errsChan', ');', 'err', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'RELATION_OPERATOR', 'IDENTIFIER', 'PUNCTUATION']"
143,            logCtx.Error(err.Error()),['logCtx.Error(err.Error())'],['FUNCTION_CALL']
144,            res.Write(ResErr(err.Error())),['res.Write(ResErr(err.Error()))'],['FUNCTION_CALL']
145,            return,['return'],['KEYWORD']
146,        },['}'],['PUNCTUATION']
147,        items := <-itemsChan,"['items', ':=', '<-', 'itemsChan']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'CHANNEL_OPERATOR', 'IDENTIFIER']"
148,        amount := addItems(items),"['amount', ':=', 'addItems', '(', 'items', ')']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
149,"        appFee := calculateFee(amount, .03) //TODO: Store this somewhere where it can be edited without having to restart the app.","['appFee', ':=', 'calculateFee', '(', 'amount', ',', '.', '03', ')', '//', 'TODO:', 'Store', 'this', 'somewhere', 'where', 'it', 'can', 'be', 'edited', 'without', 'having', 'to', 'restart', 'the', 'app.']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'PUNCTUATION', 'OCTAL_LITERAL', 'PUNCTUATION', 'COMMENT', 'NNP', 'NNP', 'DT', 'RB', 'WRB', 'PRP', 'MD', 'VB', 'VBN', 'IN', 'VBG', 'TO', 'VB', 'DT', 'NN']"
150,        invoice := billable.BillObject{,"['invoice', ':=', 'billable', '.', 'BillObject', '{']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
151,"            Desc:     ""Test Charge"", //TODO: Generate this description from the event, items and bidder somehow.","['Desc', ':', '""Test Charge""', ',', '//', 'TODO:', 'Generate', 'this', 'description', 'from', 'the', 'event,', 'items', 'and', 'bidder', 'somehow.']","['IDENTIFIER', 'PUNCTUATION', 'STRING_LITERAL', 'PUNCTUATION', 'COMMENT', 'NNP', 'NNP', 'DT', 'NN', 'IN', 'DT', 'JJ', 'NNS', 'CC', 'NN', 'NN']"
152,"            Amount:   amount,","['Amount', ':', 'amount', ',']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
153,"            Currency: ""usd"",","['Currency', ':', '""usd""', ',']","['IDENTIFIER', 'PUNCTUATION', 'STRING_LITERAL', 'PUNCTUATION']"
154,"            Dest:     <-creditableAcctChan,","['Dest', ':', '<-', 'creditableAcctChan', ',']","['IDENTIFIER', 'PUNCTUATION', 'CHANNEL_OPERATOR', 'IDENTIFIER', 'PUNCTUATION']"
155,"            Fee:      appFee,","['Fee', ':', 'appFee', ',']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
156,"            Meta:     createItemsList(items),","['Meta', ':', 'createItemsList', '(', 'items', '),']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
157,"            Customer: <-billableBidderIDChan,","['Customer', ':', '<-', 'billableBidderIDChan', ',']","['IDENTIFIER', 'PUNCTUATION', 'CHANNEL_OPERATOR', 'IDENTIFIER', 'PUNCTUATION']"
158,        },['}'],['PUNCTUATION']
159,"        trans, err := acct.ChargeBidder(invoice)","['trans', ',', 'err', ':=', 'acct.ChargeBidder(invoice)']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
160,        if err != nil {,"['if', 'err', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'RELATION_OPERATOR', 'IDENTIFIER', 'PUNCTUATION']"
161,            logCtx.Error(err.Error()),['logCtx.Error(err.Error())'],['FUNCTION_CALL']
162,            res.Write(ResErr(errStripeIssue.Error())),['res.Write(ResErr(errStripeIssue.Error()))'],['FUNCTION_CALL']
163,            return,['return'],['KEYWORD']
164,        },['}'],['PUNCTUATION']
165,        logCtx.WithFields(log.Fields{,"['logCtx', '.', 'WithFields', '(', 'log', '.', 'Fields', '{']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
166,"            ""stripeTransID"": trans.TransID,","['""stripeTransID""', ':', 'trans', '.', 'TransID', ',']","['STRING_LITERAL', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
167,"            ""itemcCount"":    len(items),","['""itemcCount""', ':', 'len', '(', 'items', '),']","['STRING_LITERAL', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
168,"        }).Info(""Transferred funds from bidder to client"")","['}).', 'Info', '(', '""Transferred funds from bidder to client""', ')']","['PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'STRING_LITERAL', 'PUNCTUATION']"
169,        dbTrans := db.Transaction{,"['dbTrans', ':=', 'db', '.', 'Transaction', '{']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
170,"            TransID:  trans.TransID,","['TransID', ':', 'trans', '.', 'TransID', ',']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
171,"            UserID:   5,","['UserID', ':', '5', ',']","['IDENTIFIER', 'PUNCTUATION', 'DECIMAL_LITERAL', 'PUNCTUATION']"
172,"            BidderID: bidderID,","['BidderID', ':', 'bidderID', ',']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
173,"            EventID:  eventID,","['EventID', ':', 'eventID', ',']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
174,"            Amount:   int64(amount),","['Amount', ':', 'int64', '(', 'amount', '),']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
175,"            AppFee:   int64(appFee),","['AppFee', ':', 'int64', '(', 'appFee', '),']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
176,"            Desc:     ""Some test order"",","['Desc', ':', '""Some test order""', ',']","['IDENTIFIER', 'PUNCTUATION', 'STRING_LITERAL', 'PUNCTUATION']"
177,"            Status:   ""completed"",","['Status', ':', '""completed""', ',']","['IDENTIFIER', 'PUNCTUATION', 'STRING_LITERAL', 'PUNCTUATION']"
178,        },['}'],['PUNCTUATION']
179,"        orderID, err := dB.InsertTransaction(dbTrans)","['orderID', ',', 'err', ':=', 'dB.InsertTransaction(dbTrans)']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
180,        if err != nil {,"['if', 'err', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'RELATION_OPERATOR', 'IDENTIFIER', 'PUNCTUATION']"
181,            logCtx.WithFields(log.Fields{,"['logCtx', '.', 'WithFields', '(', 'log', '.', 'Fields', '{']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
182,"                ""stripeTransID"": dbTrans.TransID,","['""stripeTransID""', ':', 'dbTrans', '.', 'TransID', ',']","['STRING_LITERAL', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
183,"                ""_timestamp"":    time.Now(),","['""_timestamp""', ':', 'time.Now()', ',']","['STRING_LITERAL', 'PUNCTUATION', 'FUNCTION_CALL', 'PUNCTUATION']"
184,            }).Error(err.Error()),"['}).', 'Error', '(', 'err.Error())']","['PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'FUNCTION_CALL']"
185,            res.Write(ResErr(errLoggingTrans.Error())),['res.Write(ResErr(errLoggingTrans.Error()))'],['FUNCTION_CALL']
186,            return,['return'],['KEYWORD']
187,        },['}'],['PUNCTUATION']
188,"        for it, val := range items {","['for', 'it', ',', 'val', ':=', 'range', 'items', '{']","['KEYWORD', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'KEYWORD', 'IDENTIFIER', 'PUNCTUATION']"
189,            i := db.TransactionLine{,"['i', ':=', 'db', '.', 'TransactionLine', '{']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
190,"                OrderID: orderID,","['OrderID', ':', 'orderID', ',']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
191,"                ItemID:  val.ItemID,","['ItemID', ':', 'val', '.', 'ItemID', ',']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
192,"                Amount:  uint64(val.Bid * 100), //Must do this since the bid is in dollars but the amount is pennies","['Amount', ':', 'uint64', '(', 'val', '.', 'Bid', '*', '100', '),', '//', 'Must', 'do', 'this', 'since', 'the', 'bid', 'is', 'in', 'dollars', 'but', 'the', 'amount', 'is', 'pennies']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'ARITHMETIC_OPERATOR', 'DECIMAL_LITERAL', 'PUNCTUATION', 'COMMENT', 'NNP', 'VB', 'DT', 'IN', 'DT', 'NN', 'VBZ', 'IN', 'NNS', 'CC', 'DT', 'NN', 'VBZ', 'NNS']"
193,"                Line:    it,","['Line', ':', 'it', ',']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
194,            },['}'],['PUNCTUATION']
195,            err := dB.InsertTransactionLine(i),"['err', ':=', 'dB.InsertTransactionLine(i)']","['IDENTIFIER', 'ASSIGNMENT_OPERATOR', 'FUNCTION_CALL']"
196,            if err != nil {,"['if', 'err', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'RELATION_OPERATOR', 'IDENTIFIER', 'PUNCTUATION']"
197,                logCtx.WithFields(log.Fields{,"['logCtx', '.', 'WithFields', '(', 'log', '.', 'Fields', '{']","['IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
198,"                    ""stripeTransID"": dbTrans.TransID,","['""stripeTransID""', ':', 'dbTrans', '.', 'TransID', ',']","['STRING_LITERAL', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
199,"                    ""lineNumber"":    i,","['""lineNumber""', ':', 'i', ',']","['STRING_LITERAL', 'PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION']"
200,"                    ""_timestamp"":    time.Now(),","['""_timestamp""', ':', 'time.Now()', ',']","['STRING_LITERAL', 'PUNCTUATION', 'FUNCTION_CALL', 'PUNCTUATION']"
201,                }).Error(err.Error()),"['}).', 'Error', '(', 'err.Error())']","['PUNCTUATION', 'IDENTIFIER', 'PUNCTUATION', 'FUNCTION_CALL']"
202,                res.Write(ResErr(errLoggingTrans.Error())),['res.Write(ResErr(errLoggingTrans.Error()))'],['FUNCTION_CALL']
203,                return,['return'],['KEYWORD']
204,            },['}'],['PUNCTUATION']
205,        },['}'],['PUNCTUATION']
206,"        logCtx.WithField(""orderID"", orderID).Info(""Order created"")","['logCtx.WithField(""orderID"", orderID).Info(""Order created"")']",['FUNCTION_CALL']
207,        //TODO: Send receipt to buyer.,"['//', 'TODO:', 'Send', 'receipt', 'to', 'buyer.']","['COMMENT', 'NNP', 'NNP', 'NN', 'TO', 'VB']"
208,        res.Write(ResOK(trans.TransID)),['res.Write(ResOK(trans.TransID))'],['FUNCTION_CALL']
209,    }),['})'],['PUNCTUATION']
210,},['}'],['PUNCTUATION']
