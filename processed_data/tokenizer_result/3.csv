,text,token
0,"I want to write three concurrent go routines that sends integers to each other. Now, my code is compiled properly, however after first execution it gives error ""throw: all goroutines are asleep - deadlock!"". I tried to find the error but I could not able to find any error in code logic.Can anybody help me to find the mistake with my code. My code is given below. 

","['I', 'want', 'to', 'write', 'three', 'concurrent', 'go', 'routines', 'that', 'sends', 'integers', 'to', 'each', 'other.', 'Now,', 'my', 'code', 'is', 'compiled', 'properly,', 'however', 'after', 'first', 'execution', 'it', 'gives', 'error', '""throw:', 'all', 'goroutines', 'are', 'asleep', '-', 'deadlock!"".', 'I', 'tried', 'to', 'find', 'the', 'error', 'but', 'I', 'could', 'not', 'able', 'to', 'find', 'any', 'error', 'in', 'code', 'logic.Can', 'anybody', 'help', 'me', 'to', 'find', 'the', 'mistake', 'with', 'my', 'code.', 'My', 'code', 'is', 'given', 'below.']"
1,package main,"['package', 'main']"
2,"import ""rand""","['import', '""rand""']"
3,"func Routine1(command12 chan int, response12 chan int, command13 chan int, response13 chan int) {","['func', 'Routine1', '(', 'command12', 'chan', 'int', ',', 'response12', 'chan', 'int', ',', 'command13', 'chan', 'int', ',', 'response13', 'chan', 'int', ')', '{']"
4,    // z12 is a variable which stores the value comming from channel 2 and z13 is a variable which stores the value comming from channel 3.,"['//', 'z12', 'is', 'a', 'variable', 'which', 'stores', 'the', 'value', 'comming', 'from', 'channel', '2', 'and', 'z13', 'is', 'a', 'variable', 'which', 'stores', 'the', 'value', 'comming', 'from', 'channel', '3.']"
5,    z12 := 200,"['z12', ':=', '200']"
6,    z13 := 200,"['z13', ':=', '200']"
7,    m12 := false,"['m12', ':=', 'false']"
8,    m13 := false,"['m13', ':=', 'false']"
9,    y := 0,"['y', ':=', '0']"
10,    for i := 0; i < 20; i++ {,"['for', 'i', ':=', '0', ';', 'i', '<', '20', ';', 'i', '++', '{']"
11,        y = rand.Intn(100),"['y', '=', 'rand.Intn(100)']"
12,        // If y's value is not 0 then the value will be sent to routine 2 or 3 according to   prime or not.,"['//', 'If', ""y's"", 'value', 'is', 'not', '0', 'then', 'the', 'value', 'will', 'be', 'sent', 'to', 'routine', '2', 'or', '3', 'according', 'to', 'prime', 'or', 'not.']"
13,"        // If y's value is 0 then process state (the varibles used by it means z12, z13) and channel state will be saved.[routine 1 is initiator]","['//', 'If', ""y's"", 'value', 'is', '0', 'then', 'process', 'state', '(the', 'varibles', 'used', 'by', 'it', 'means', 'z12,', 'z13)', 'and', 'channel', 'state', 'will', 'be', 'saved.[routine', '1', 'is', 'initiator]']"
14,        if y == 0 {,"['if', 'y', '==', '0', '{']"
15,"            print(z12, ""    z12 STATE SAVED\n"")","['print', '(', 'z12', ',', '""    z12 STATE SAVED\\n""', ')']"
16,"            print(z13, ""    z13 STATE SAVED\n"")","['print', '(', 'z13', ',', '""    z13 STATE SAVED\\n""', ')']"
17,"            // Routine 1 is initiator,  it sends 0 to make other process to save the state.","['//', 'Routine', '1', 'is', 'initiator,', 'it', 'sends', '0', 'to', 'make', 'other', 'process', 'to', 'save', 'the', 'state.']"
18,            y = 0,"['y', '=', '0']"
19,            command12 <- y,"['command12', '<-', 'y']"
20,            command13 <- y,"['command13', '<-', 'y']"
21,"            // Untill routine 2 and 3 does not send 0, process 1 is on channel saving state (it's process state is already saved).","['//', 'Untill', 'routine', '2', 'and', '3', 'does', 'not', 'send', '0,', 'process', '1', 'is', 'on', 'channel', 'saving', 'state', ""(it's"", 'process', 'state', 'is', 'already', 'saved).']"
22,"            // When routine 1 recives 0 from both other processes, channel is saved and routine 1 retuns to it's common routine procedure.","['//', 'When', 'routine', '1', 'recives', '0', 'from', 'both', 'other', 'processes,', 'channel', 'is', 'saved', 'and', 'routine', '1', 'retuns', 'to', ""it's"", 'common', 'routine', 'procedure.']"
23,"            // When routine 1 recives 0 from any other processes, saving channel bettwen them is stopped.","['//', 'When', 'routine', '1', 'recives', '0', 'from', 'any', 'other', 'processes,', 'saving', 'channel', 'bettwen', 'them', 'is', 'stopped.']"
24,"            // m12, m13 is used to mark whether 0 recived or not.","['//', 'm12,', 'm13', 'is', 'used', 'to', 'mark', 'whether', '0', 'recived', 'or', 'not.']"
25,            for m12 != true || m13 != true {,"['for', 'm12', '!=', 'true', '||', 'm13', '!=', 'true', '{']"
26,                select {,"['select', '{']"
27,                case cmd1 := <-response12:,"['case', 'cmd1', ':=', '<-', 'response12', ':']"
28,                    {,['{']
29,                        z12 = cmd1,"['z12', '=', 'cmd1']"
30,                        if z12 != 0 {,"['if', 'z12', '!=', '0', '{']"
31,"                            print(z12, ""    z12  Channel Saving.... \n"")","['print', '(', 'z12', ',', '""    z12  Channel Saving.... \\n""', ')']"
32,                            y = rand.Intn(100),"['y', '=', 'rand.Intn(100)']"
33,                            command12 <- y,"['command12', '<-', 'y']"
34,                        },['}']
35,                        if z12 == 0 {,"['if', 'z12', '==', '0', '{']"
36,                            m12 = true,"['m12', '=', 'true']"
37,"                            print("" z12  Channel Saving Stopped \n"")","['print', '(', '"" z12  Channel Saving Stopped \\n""', ')']"
38,                        },['}']
39,                    },['}']
40,                case cmd2 := <-response13:,"['case', 'cmd2', ':=', '<-', 'response13', ':']"
41,                    {,['{']
42,                        z13 = cmd2,"['z13', '=', 'cmd2']"
43,                        if z13 != 0 {,"['if', 'z13', '!=', '0', '{']"
44,"                            print(z13, ""    z13  Channel Saving.... \n"")","['print', '(', 'z13', ',', '""    z13  Channel Saving.... \\n""', ')']"
45,                            y = rand.Intn(100),"['y', '=', 'rand.Intn(100)']"
46,                            command13 <- y,"['command13', '<-', 'y']"
47,                        },['}']
48,                        if z13 == 0 {,"['if', 'z13', '==', '0', '{']"
49,                            m13 = true,"['m13', '=', 'true']"
50,"                            print(""    z13  Channel Saving Stopped \n"")","['print', '(', '""    z13  Channel Saving Stopped \\n""', ')']"
51,                        },['}']
52,                    },['}']
53,                },['}']
54,            },['}']
55,            // After saving process state it retuns to it's normal behaviour.,"['//', 'After', 'saving', 'process', 'state', 'it', 'retuns', 'to', ""it's"", 'normal', 'behaviour.']"
56,            m12 = false,"['m12', '=', 'false']"
57,            m13 = false,"['m13', '=', 'false']"
58,        },['}']
59,        if y != 0 {,"['if', 'y', '!=', '0', '{']"
60,"            // If y value is not 0, routine 1 just sends int to other process according to prime or not and recives int accordingly.","['//', 'If', 'y', 'value', 'is', 'not', '0,', 'routine', '1', 'just', 'sends', 'int', 'to', 'other', 'process', 'according', 'to', 'prime', 'or', 'not', 'and', 'recives', 'int', 'accordingly.']"
61,            if y%2 == 0 {,"['if', 'y', '2', '==', '0', '{']"
62,                command12 <- y,"['command12', '<-', 'y']"
63,            },['}']
64,            if y%2 != 0 {,"['if', 'y', '2', '!=', '0', '{']"
65,                command13 <- y,"['command13', '<-', 'y']"
66,            },['}']
67,            select {,"['select', '{']"
68,            case cmd1 := <-response12:,"['case', 'cmd1', ':=', '<-', 'response12', ':']"
69,                {,['{']
70,                    z12 = cmd1,"['z12', '=', 'cmd1']"
71,"                    print(z12, ""    z12\n"")","['print', '(', 'z12', ',', '""    z12\\n""', ')']"
72,                },['}']
73,            case cmd2 := <-response13:,"['case', 'cmd2', ':=', '<-', 'response13', ':']"
74,                {,['{']
75,                    z13 = cmd2,"['z13', '=', 'cmd2']"
76,"                    print(z13, ""   z13\n"")","['print', '(', 'z13', ',', '""   z13\\n""', ')']"
77,                },['}']
78,            },['}']
79,        },['}']
80,    },['}']
81,    close(command12),"['close', '(', 'command12', ')']"
82,    close(command13),"['close', '(', 'command13', ')']"
83,},['}']
84,//Routine 2 (or 3) is not an initiator (means it can't send 0). When it recives 0 (from routine 1 or 3) it save the state of process and the state of the channel from which it recived).,"['//', 'Routine', '2', '(or', '3)', 'is', 'not', 'an', 'initiator', '(means', 'it', ""can't"", 'send', '0).', 'When', 'it', 'recives', '0', '(from', 'routine', '1', 'or', '3)', 'it', 'save', 'the', 'state', 'of', 'process', 'and', 'the', 'state', 'of', 'the', 'channel', 'from', 'which', 'it', 'recived).']"
85,"// When it recives 0 from both other two routine, it saves all channel state and returns to it's common behaviour. [same in routine 3]","['//', 'When', 'it', 'recives', '0', 'from', 'both', 'other', 'two', 'routine,', 'it', 'saves', 'all', 'channel', 'state', 'and', 'returns', 'to', ""it's"", 'common', 'behaviour.', '[same', 'in', 'routine', '3]']"
86,"func Routine2(command12 chan int, response12 chan int, command23 chan int, response23 chan int) {","['func', 'Routine2', '(', 'command12', 'chan', 'int', ',', 'response12', 'chan', 'int', ',', 'command23', 'chan', 'int', ',', 'response23', 'chan', 'int', ')', '{']"
87,    z21 := 200,"['z21', ':=', '200']"
88,    z23 := 200,"['z23', ':=', '200']"
89,    m21 := false,"['m21', ':=', 'false']"
90,    m23 := false,"['m23', ':=', 'false']"
91,    for i := 0; i < 20; i++ {,"['for', 'i', ':=', '0', ';', 'i', '<', '20', ';', 'i', '++', '{']"
92,        select {,"['select', '{']"
93,"        case x, open := <-command12:","['case', 'x', ',', 'open', ':=', '<-', 'command12', ':']"
94,            {,['{']
95,                if !open {,"['if', '!', 'open', '{']"
96,                    return,['return']
97,                },['}']
98,                if x != 0 && m23 != true {,"['if', 'x', '!=', '0', '&&', 'm23', '!=', 'true', '{']"
99,                    z21 = x,"['z21', '=', 'x']"
100,"                    print(z21, ""   z21\n"")","['print', '(', 'z21', ',', '""   z21\\n""', ')']"
101,                },['}']
102,                if x != 0 && m23 == true {,"['if', 'x', '!=', '0', '&&', 'm23', '==', 'true', '{']"
103,                    z21 = x,"['z21', '=', 'x']"
104,"                    print(z21, ""   z21 Channel Saving \n"")","['print', '(', 'z21', ',', '""   z21 Channel Saving \\n""', ')']"
105,                },['}']
106,                if x == 0 {,"['if', 'x', '==', '0', '{']"
107,                    m21 = true,"['m21', '=', 'true']"
108,                    if m21 == true && m23 == true {,"['if', 'm21', '==', 'true', '&&', 'm23', '==', 'true', '{']"
109,"                        print("" z21 and z23 Channel Saving Stopped \n"")","['print', '(', '"" z21 and z23 Channel Saving Stopped \\n""', ')']"
110,                        m23 = false,"['m23', '=', 'false']"
111,                        m21 = false,"['m21', '=', 'false']"
112,                    },['}']
113,                    if m21 == true && m23 != true {,"['if', 'm21', '==', 'true', '&&', 'm23', '!=', 'true', '{']"
114,                        z21 = x,"['z21', '=', 'x']"
115,"                        print(z21, ""   z21  Channel Saved \n"")","['print', '(', 'z21', ',', '""   z21  Channel Saved \\n""', ')']"
116,                    },['}']
117,                },['}']
118,            },['}']
119,"        case x, open := <-response23:","['case', 'x', ',', 'open', ':=', '<-', 'response23', ':']"
120,            {,['{']
121,                if !open {,"['if', '!', 'open', '{']"
122,                    return,['return']
123,                },['}']
124,                if x != 0 && m21 != true {,"['if', 'x', '!=', '0', '&&', 'm21', '!=', 'true', '{']"
125,                    z23 = x,"['z23', '=', 'x']"
126,"                    print(z23, ""   z21\n"")","['print', '(', 'z23', ',', '""   z21\\n""', ')']"
127,                },['}']
128,                if x != 0 && m21 == true {,"['if', 'x', '!=', '0', '&&', 'm21', '==', 'true', '{']"
129,                    z23 = x,"['z23', '=', 'x']"
130,"                    print(z23, ""   z23 Channel Saving \n"")","['print', '(', 'z23', ',', '""   z23 Channel Saving \\n""', ')']"
131,                },['}']
132,                if x == 0 {,"['if', 'x', '==', '0', '{']"
133,                    m23 = true,"['m23', '=', 'true']"
134,                    if m21 == true && m23 == true {,"['if', 'm21', '==', 'true', '&&', 'm23', '==', 'true', '{']"
135,"                        print("" z23 Channel Saving Stopped \n"")","['print', '(', '"" z23 Channel Saving Stopped \\n""', ')']"
136,                        m23 = false,"['m23', '=', 'false']"
137,                        m21 = false,"['m21', '=', 'false']"
138,                    },['}']
139,                    if m23 == true && m21 != true {,"['if', 'm23', '==', 'true', '&&', 'm21', '!=', 'true', '{']"
140,                        z23 = x,"['z23', '=', 'x']"
141,"                        print(z23, ""   z23  Channel Saved \n"")","['print', '(', 'z23', ',', '""   z23  Channel Saved \\n""', ')']"
142,                    },['}']
143,                },['}']
144,            },['}']
145,        },['}']
146,        if m23 == false && m21 == false {,"['if', 'm23', '==', 'false', '&&', 'm21', '==', 'false', '{']"
147,            y := rand.Intn(100),"['y', ':=', 'rand.Intn(100)']"
148,            if y%2 == 0 {,"['if', 'y', '2', '==', '0', '{']"
149,                if y == 0 {,"['if', 'y', '==', '0', '{']"
150,                    y = 10,"['y', '=', '10']"
151,                    response12 <- y,"['response12', '<-', 'y']"
152,                },['}']
153,            },['}']
154,            if y%2 != 0 {,"['if', 'y', '2', '!=', '0', '{']"
155,                if y == 0 {,"['if', 'y', '==', '0', '{']"
156,                    y = 10,"['y', '=', '10']"
157,                    response23 <- y,"['response23', '<-', 'y']"
158,                },['}']
159,            },['}']
160,        },['}']
161,        if m23 == true && m21 != true {,"['if', 'm23', '==', 'true', '&&', 'm21', '!=', 'true', '{']"
162,            y := rand.Intn(100),"['y', ':=', 'rand.Intn(100)']"
163,            response12 <- y,"['response12', '<-', 'y']"
164,        },['}']
165,        if m23 != true && m21 == true {,"['if', 'm23', '!=', 'true', '&&', 'm21', '==', 'true', '{']"
166,            y := rand.Intn(100),"['y', ':=', 'rand.Intn(100)']"
167,            command23 <- y,"['command23', '<-', 'y']"
168,        },['}']
169,    },['}']
170,    close(response12),"['close', '(', 'response12', ')']"
171,    close(command23),"['close', '(', 'command23', ')']"
172,},['}']
173,"func Routine3(command13 chan int, response13 chan int, command23 chan int, response23 chan int) {","['func', 'Routine3', '(', 'command13', 'chan', 'int', ',', 'response13', 'chan', 'int', ',', 'command23', 'chan', 'int', ',', 'response23', 'chan', 'int', ')', '{']"
174,    z31 := 200,"['z31', ':=', '200']"
175,    z32 := 200,"['z32', ':=', '200']"
176,    m31 := false,"['m31', ':=', 'false']"
177,    m32 := false,"['m32', ':=', 'false']"
178,    for i := 0; i < 20; i++ {,"['for', 'i', ':=', '0', ';', 'i', '<', '20', ';', 'i', '++', '{']"
179,        select {,"['select', '{']"
180,"        case x, open := <-command13:","['case', 'x', ',', 'open', ':=', '<-', 'command13', ':']"
181,            {,['{']
182,                if !open {,"['if', '!', 'open', '{']"
183,                    return,['return']
184,                },['}']
185,                if x != 0 && m32 != true {,"['if', 'x', '!=', '0', '&&', 'm32', '!=', 'true', '{']"
186,                    z31 = x,"['z31', '=', 'x']"
187,"                    print(z31, ""   z21\n"")","['print', '(', 'z31', ',', '""   z21\\n""', ')']"
188,                },['}']
189,                if x != 0 && m32 == true {,"['if', 'x', '!=', '0', '&&', 'm32', '==', 'true', '{']"
190,                    z31 = x,"['z31', '=', 'x']"
191,"                    print(z31, ""   z31 Channel Saving \n"")","['print', '(', 'z31', ',', '""   z31 Channel Saving \\n""', ')']"
192,                },['}']
193,                if x == 0 {,"['if', 'x', '==', '0', '{']"
194,                    m31 = true,"['m31', '=', 'true']"
195,                    if m31 == true && m32 == true {,"['if', 'm31', '==', 'true', '&&', 'm32', '==', 'true', '{']"
196,"                        print("" z21 Channel Saving Stopped \n"")","['print', '(', '"" z21 Channel Saving Stopped \\n""', ')']"
197,                        m31 = false,"['m31', '=', 'false']"
198,                        m32 = false,"['m32', '=', 'false']"
199,                    },['}']
200,                    if m31 == true && m32 != true {,"['if', 'm31', '==', 'true', '&&', 'm32', '!=', 'true', '{']"
201,                        z31 = x,"['z31', '=', 'x']"
202,"                        print(z31, ""   z31  Channel Saved \n"")","['print', '(', 'z31', ',', '""   z31  Channel Saved \\n""', ')']"
203,                    },['}']
204,                },['}']
205,            },['}']
206,"        case x, open := <-command23:","['case', 'x', ',', 'open', ':=', '<-', 'command23', ':']"
207,            {,['{']
208,                if !open {,"['if', '!', 'open', '{']"
209,                    return,['return']
210,                },['}']
211,                if x != 0 && m31 != true {,"['if', 'x', '!=', '0', '&&', 'm31', '!=', 'true', '{']"
212,                    z32 = x,"['z32', '=', 'x']"
213,"                    print(z32, ""   z32\n"")","['print', '(', 'z32', ',', '""   z32\\n""', ')']"
214,                },['}']
215,                if x != 0 && m31 == true {,"['if', 'x', '!=', '0', '&&', 'm31', '==', 'true', '{']"
216,                    z32 = x,"['z32', '=', 'x']"
217,"                    print(z32, ""   z32 Channel Saving \n"")","['print', '(', 'z32', ',', '""   z32 Channel Saving \\n""', ')']"
218,                },['}']
219,                if x == 0 {,"['if', 'x', '==', '0', '{']"
220,                    m32 = true,"['m32', '=', 'true']"
221,                    if m31 == true && m32 == true {,"['if', 'm31', '==', 'true', '&&', 'm32', '==', 'true', '{']"
222,"                        print("" z32 Channel Saving Stopped \n"")","['print', '(', '"" z32 Channel Saving Stopped \\n""', ')']"
223,                        m31 = false,"['m31', '=', 'false']"
224,                        m32 = false,"['m32', '=', 'false']"
225,                    },['}']
226,                    if m32 == true && m31 != true {,"['if', 'm32', '==', 'true', '&&', 'm31', '!=', 'true', '{']"
227,                        z32 = x,"['z32', '=', 'x']"
228,"                        print(z32, ""   z32  Channel Saved \n"")","['print', '(', 'z32', ',', '""   z32  Channel Saved \\n""', ')']"
229,                    },['}']
230,                },['}']
231,            },['}']
232,        },['}']
233,        if m31 == false && m32 == false {,"['if', 'm31', '==', 'false', '&&', 'm32', '==', 'false', '{']"
234,            y := rand.Intn(100),"['y', ':=', 'rand.Intn(100)']"
235,            if y%2 == 0 {,"['if', 'y', '2', '==', '0', '{']"
236,                response13 <- y,"['response13', '<-', 'y']"
237,            },['}']
238,            if y%2 != 0 {,"['if', 'y', '2', '!=', '0', '{']"
239,                response23 <- y,"['response23', '<-', 'y']"
240,            },['}']
241,        },['}']
242,        if m31 == true && m32 != true {,"['if', 'm31', '==', 'true', '&&', 'm32', '!=', 'true', '{']"
243,            y := rand.Intn(100),"['y', ':=', 'rand.Intn(100)']"
244,            response13 <- y,"['response13', '<-', 'y']"
245,        },['}']
246,        if m31 != true && m32 == true {,"['if', 'm31', '!=', 'true', '&&', 'm32', '==', 'true', '{']"
247,            y := rand.Intn(100),"['y', ':=', 'rand.Intn(100)']"
248,            response23 <- y,"['response23', '<-', 'y']"
249,        },['}']
250,    },['}']
251,    close(response13),"['close', '(', 'response13', ')']"
252,    close(response23),"['close', '(', 'response23', ')']"
253,},['}']
254,func main() {,"['func', 'main', '()', '{']"
255,    // Three concurrent channels are created to pass integers to each other.,"['//', 'Three', 'concurrent', 'channels', 'are', 'created', 'to', 'pass', 'integers', 'to', 'each', 'other.']"
256,    // command 12 used to send int and response12 is used to receive int from routine 1 to routine 2.,"['//', 'command', '12', 'used', 'to', 'send', 'int', 'and', 'response12', 'is', 'used', 'to', 'receive', 'int', 'from', 'routine', '1', 'to', 'routine', '2.']"
257,    // response 12 used to send int and command 12 is used to receive int from routine 2 to routine 1. {so as for others},"['//', 'response', '12', 'used', 'to', 'send', 'int', 'and', 'command', '12', 'is', 'used', 'to', 'receive', 'int', 'from', 'routine', '2', 'to', 'routine', '1.', '{so', 'as', 'for', 'others}']"
258,    command12 := make(chan int),"['command12', ':=', 'make', '(', 'chan', 'int', ')']"
259,    response12 := make(chan int),"['response12', ':=', 'make', '(', 'chan', 'int', ')']"
260,    command13 := make(chan int),"['command13', ':=', 'make', '(', 'chan', 'int', ')']"
261,    response13 := make(chan int),"['response13', ':=', 'make', '(', 'chan', 'int', ')']"
262,    command23 := make(chan int),"['command23', ':=', 'make', '(', 'chan', 'int', ')']"
263,    response23 := make(chan int),"['response23', ':=', 'make', '(', 'chan', 'int', ')']"
264,"    go Routine1(command12, response12, command13, response13)","['go', 'Routine1', '(', 'command12', ',', 'response12', ',', 'command13', ',', 'response13', ')']"
265,"    go Routine2(command12, response12, command23, response23)","['go', 'Routine2', '(', 'command12', ',', 'response12', ',', 'command23', ',', 'response23', ')']"
266,"    Routine3(command13, response13, command23, response23)","['Routine3', '(', 'command13', ',', 'response13', ',', 'command23', ',', 'response23', ')']"
267,},['}']
