,text,token,annotation
0,"I'm trying to get ElasticSearch to index content for my autocomplete service, using Completion Suggesters in v1.4x. I was following advice from ElasticSearch - You Complete Me and am using the Go Client olivere/elastic. 

My index method looks a bit like this:

","[""I'm"", 'trying', 'to', 'get', 'ElasticSearch', 'to', 'index', 'content', 'for', 'my', 'autocomplete', 'service,', 'using', 'Completion', 'Suggesters', 'in', 'v1.4x.', 'I', 'was', 'following', 'advice', 'from', 'ElasticSearch', '-', 'You', 'Complete', 'Me', 'and', 'am', 'using', 'the', 'Go', 'Client', 'olivere/elastic.', 'My', 'index', 'method', 'looks', 'a', 'bit', 'like', 'this:']","['NNP', 'VBG', 'TO', 'VB', 'NNP', 'TO', 'NN', 'NN', 'IN', 'PRP$', 'JJ', 'NN', 'VBG', 'NNP', 'NNP', 'IN', 'NN', 'PRP', 'VBD', 'VBG', 'NN', 'IN', 'NNP', ':', 'PRP', 'VB', 'NNP', 'CC', 'VBP', 'VBG', 'DT', 'NNP', 'NNP', 'MD', 'NNP', 'NN', 'NN', 'VBZ', 'DT', 'NN', 'IN', 'NN']"
1,"func IndexVehicle(client *elastic.Client, vehicle Vehicle) (bool, error) {","['func', 'IndexVehicle', '(', 'client', '*', 'elastic', '.', 'Client', ',', 'vehicle', 'Vehicle', ')', '(', 'bool', ',', 'error', ')', '{']","['KEYWORD', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'IDENTIFIER', 'OPERATOR', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'OPERATOR']"
2,    // See if it exists already,"['//', 'See', 'if', 'it', 'exists', 'already']","['COMMENT', 'VB', 'IN', 'PRP', 'VBZ', 'RB']"
3,"    fetch, err := client.Get().","['fetch', ',', 'err', ':=', 'client.Get()', '.']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'FUNCTION_CALL', 'OPERATOR']"
4,        Index(vehicleIndex).,"['Index', '(', 'vehicleIndex', ').']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
5,"        Type(""vehicle"").","['Type', '(', '""vehicle""', ').']","['IDENTIFIER', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR']"
6,        Id(vehicle.Id).,"['Id', '(', 'vehicle', '.', 'Id', ').']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
7,        Do(),"['Do', '()']","['IDENTIFIER', 'OPERATOR']"
8,    if err != nil || fetch.Found {,"['if', 'err', '!=', 'nil', '||', 'fetch', '.', 'Found', '{']","['KEYWORD', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
9,"        return false, err","['return', 'false', ',', 'err']","['KEYWORD', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER']"
10,    },['}'],['OPERATOR']
11,"    vehicleName := fmt.Sprintf(""%s %s (%s) %s"", vehicle.Make, vehicle.Model, vehicle.Model_year, vehicle.Primary_fuel)","['vehicleName', ':=', 'fmt.Sprintf(""%s %s (%s) %s"", vehicle.Make, vehicle.Model, vehicle.Model_year, vehicle.Primary_fuel)']","['IDENTIFIER', 'OPERATOR', 'FUNCTION_CALL']"
12,    suggest := elastic.NewSuggestField(),"['suggest', ':=', 'elastic.NewSuggestField()']","['IDENTIFIER', 'OPERATOR', 'FUNCTION_CALL']"
13,"    suggest.Input(vehicle.Make, vehicle.Model, vehicle.Primary_fuel, vehicle.Model_year).","['suggest.Input(vehicle.Make, vehicle.Model, vehicle.Primary_fuel, vehicle.Model_year)', '.']","['FUNCTION_CALL', 'OPERATOR']"
14,        Output(vehicleName).,"['Output', '(', 'vehicleName', ').']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
15,        Payload(vehicle),"['Payload', '(', 'vehicle', ')']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
16,    // Go forth and save,"['//', 'Go', 'forth', 'and', 'save']","['COMMENT', 'NNP', 'NN', 'CC', 'VB']"
17,"    put, err := client.Index().","['put', ',', 'err', ':=', 'client.Index()', '.']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'FUNCTION_CALL', 'OPERATOR']"
18,        Index(vehicleIndex).,"['Index', '(', 'vehicleIndex', ').']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
19,"        Type(""vehicle"").","['Type', '(', '""vehicle""', ').']","['IDENTIFIER', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR']"
20,        Id(vehicle.Id).,"['Id', '(', 'vehicle', '.', 'Id', ').']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
21,        Debug(true).Pretty(true).,"['Debug', '(', 'true', ').', 'Pretty', '(', 'true', ').']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
22,"        BodyJson(indexBody{Name: vehicleName, Suggest: suggest}).","['BodyJson', '(', 'indexBody', '{', 'Name', ':', 'vehicleName', ',', 'Suggest', ':', 'suggest', '}).']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
23,        Do(),"['Do', '()']","['IDENTIFIER', 'OPERATOR']"
24,    if err != nil {,"['if', 'err', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
25,"        return false, err","['return', 'false', ',', 'err']","['KEYWORD', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER']"
26,    },['}'],['OPERATOR']
27,"    return put.Created, nil","['return', 'put', '.', 'Created', ',', 'nil']","['KEYWORD', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER']"
28,},['}'],['OPERATOR']
29,"

Now what is weird, is that in some of my tests this method works fine and items will be indexed. In other tests after wiping and rebuilding the index the tests will fail:

Earlier tests look like this in the debug:

","['Now', 'what', 'is', 'weird,', 'is', 'that', 'in', 'some', 'of', 'my', 'tests', 'this', 'method', 'works', 'fine', 'and', 'items', 'will', 'be', 'indexed.', 'In', 'other', 'tests', 'after', 'wiping', 'and', 'rebuilding', 'the', 'index', 'the', 'tests', 'will', 'fail:', 'Earlier', 'tests', 'look', 'like', 'this', 'in', 'the', 'debug:']","['RB', 'WP', 'VBZ', 'NN', 'VBZ', 'IN', 'IN', 'DT', 'IN', 'PRP$', 'NNS', 'DT', 'NN', 'VBZ', 'JJ', 'CC', 'NNS', 'MD', 'VB', 'VBN', 'IN', 'JJ', 'NNS', 'IN', 'VBG', 'CC', 'VBG', 'DT', 'NN', 'DT', 'NNS', 'MD', 'VB', 'NNP', 'NNS', 'VBP', 'IN', 'DT', 'IN', 'DT', 'NN']"
30,2014/12/15 14:11:37 PUT /vehicle/vehicle/369f96459b340507c4688740da3bfe1a?pretty=true HTTP/1.1,"['2014/12/15', '14', ':', '11', ':', '37', 'PUT', '/vehicle/vehicle/369f96459b340507c4688740da3bfe1a?pretty=true', 'HTTP/1.1']","['DIRECTORY', 'DECIMAL_LITERAL', 'OPERATOR', 'DECIMAL_LITERAL', 'OPERATOR', 'DECIMAL_LITERAL', 'IDENTIFIER', 'DIRECTORY', 'DIRECTORY']"
31,Host: localhost:9200,"['Host', ':', 'localhost', ':', '9200']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'DECIMAL_LITERAL']"
32,User-Agent: elastic/1.3.1 (darwin-amd64),"['User', '-', 'Agent', ':', 'elastic/1.3.1', '(', 'darwin', '-', 'amd64', ')']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'DIRECTORY', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
33,Transfer-Encoding: chunked,"['Transfer', '-', 'Encoding', ':', 'chunked']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER']"
34,Accept: application/json,"['Accept', ':', 'application/json']","['IDENTIFIER', 'OPERATOR', 'DIRECTORY']"
35,Content-Type: application/json,"['Content', '-', 'Type', ':', 'application/json']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'DIRECTORY']"
36,Accept-Encoding: gzip,"['Accept', '-', 'Encoding', ':', 'gzip']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER']"
37,"{""name"":""American Motors Corporation Eagle 4WD (1986) regular"",""suggest"":{""input"":[""American Motors Corporation"",""Eagle 4WD"",""regular"",""1986""],""output"":""American Motors Corporation Eagle 4WD (1986) regular"",""payload"":{""make"":""American Motors Corporation"",""model_year"":""1986"",""model"":""Eagle 4WD"",""primary_fuel"":""regular"",""vehicle_class"":""Special Purpose Vehicle 4WD"",""transmission"":""Automatic 3-spd"",""displacement"":""4.2"",""drive"":""4-Wheel or All-Wheel Drive"",""city_mpg"":""15.0"",""highway_mpg"":""19.0"",""comb_mpg"":""17.0""}}}","['{', '""name""', ':', '""American Motors Corporation Eagle 4WD (1986) regular""', ',', '""suggest""', ':{', '""input""', ':[', '""American Motors Corporation""', ',', '""Eagle 4WD""', ',', '""regular""', ',', '""1986""', '],', '""output""', ':', '""American Motors Corporation Eagle 4WD (1986) regular""', ',', '""payload""', ':{', '""make""', ':', '""American Motors Corporation""', ',', '""model_year""', ':', '""1986""', ',', '""model""', ':', '""Eagle 4WD""', ',', '""primary_fuel""', ':', '""regular""', ',', '""vehicle_class""', ':', '""Special Purpose Vehicle 4WD""', ',', '""transmission""', ':', '""Automatic 3-spd""', ',', '""displacement""', ':', '""4.2""', ',', '""drive""', ':', '""4-Wheel or All-Wheel Drive""', ',', '""city_mpg""', ':', '""15.0""', ',', '""highway_mpg""', ':', '""19.0""', ',', '""comb_mpg""', ':', '""17.0""', '}}}']","['OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR']"
38,2014/12/15 14:11:37 HTTP/1.1 201 Created,"['2014/12/15', '14', ':', '11', ':', '37', 'HTTP/1.1', '201', 'Created']","['DIRECTORY', 'DECIMAL_LITERAL', 'OPERATOR', 'DECIMAL_LITERAL', 'OPERATOR', 'DECIMAL_LITERAL', 'DIRECTORY', 'DECIMAL_LITERAL', 'IDENTIFIER']"
39,Content-Length: 134,"['Content', '-', 'Length', ':', '134']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'DECIMAL_LITERAL']"
40,Content-Type: application/json; charset=UTF-8,"['Content', '-', 'Type', ':', 'application/json;', 'charset', '=', 'UTF', '-', '8']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'DIRECTORY', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'DECIMAL_LITERAL']"
41,{,['{'],['OPERATOR']
42,"  ""_index"" : ""vehicle"",","['""_index""', ':', '""vehicle""', ',']","['STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR']"
43,"  ""_type"" : ""vehicle"",","['""_type""', ':', '""vehicle""', ',']","['STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR']"
44,"  ""_id"" : ""369f96459b340507c4688740da3bfe1a"",","['""_id""', ':', '""369f96459b340507c4688740da3bfe1a""', ',']","['STRING_LITERAL', 'OPERATOR', 'STRING_LITERAL', 'OPERATOR']"
45,"  ""_version"" : 1,","['""_version""', ':', '1', ',']","['STRING_LITERAL', 'OPERATOR', 'DECIMAL_LITERAL', 'OPERATOR']"
46,"  ""created"" : true","['""created""', ':', 'true']","['STRING_LITERAL', 'OPERATOR', 'IDENTIFIER']"
47,},['}'],['OPERATOR']
48,"

But in later tests, doing this same thing leads to errors. The err returned from IndexVehicle() in later tests is:

","['But', 'in', 'later', 'tests,', 'doing', 'this', 'same', 'thing', 'leads', 'to', 'errors.', 'The', 'err', 'returned', 'from', 'IndexVehicle()', 'in', 'later', 'tests', 'is:']","['CC', 'IN', 'RB', 'JJ', 'VBG', 'DT', 'JJ', 'NN', 'VBZ', 'TO', 'VB', 'DT', 'NN', 'VBD', 'IN', 'NNP', 'IN', 'RB', 'NNS', 'VBP']"
49,E,['E'],['IDENTIFIER']
50,Errors:,"['Errors', ':']","['IDENTIFIER', 'OPERATOR']"
51,  * /Users/phil/go/src/github.com/ride/autocomplete/vehicle_test.go ,"['*', '/Users/phil/go/src/github.com/ride/autocomplete/vehicle_test.go']","['OPERATOR', 'DIRECTORY']"
52,  Line 79: - elastic: Error 400: ElasticsearchIllegalArgumentException[No feature for name [vehicle]] ,"['Line', '79', ':', '-', 'elastic', ':', 'Error', '400', ':', 'ElasticsearchIllegalArgumentException', '[', 'No', 'feature', 'for', 'name', '[', 'vehicle', ']]']","['IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'IDENTIFIER', 'KEYWORD', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
53,  goroutine 245 [running]:,"['go', 'routine', '245', '[', 'running', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
54,  github.com/ride/autocomplete.func·033(),['github.com/ride/autocomplete.func·033()'],['DIRECTORY']
55,    /Users/phil/go/src/github.com/ride/autocomplete/vehicle_test.go:79 +0x249,"['/Users/phil/go/src/github.com/ride/autocomplete/vehicle_test.go:79', '+', '0x249']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
56,  github.com/ride/autocomplete.useIndex(0x499e98),['github.com/ride/autocomplete.useIndex(0x499e98)'],['DIRECTORY']
57,    /Users/phil/go/src/github.com/ride/autocomplete/test_helper.go:18 +0x55,"['/Users/phil/go/src/github.com/ride/autocomplete/test_helper.go:18', '+', '0x55']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
58,  github.com/ride/autocomplete.func·034(),['github.com/ride/autocomplete.func·034()'],['DIRECTORY']
59,    /Users/phil/go/src/github.com/ride/autocomplete/vehicle_test.go:96 +0x2a,"['/Users/phil/go/src/github.com/ride/autocomplete/vehicle_test.go:96', '+', '0x2a']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
60,"  github.com/jtolds/gls._m(0x0, 0xc2080ae9e0)","['github.com/jtolds/gls._m(0x0,', '0xc2', '0', '80', 'ae9e0', ')']","['DIRECTORY', 'HEX_LITERAL', 'OCTAL_LITERAL', 'DECIMAL_LITERAL', 'IDENTIFIER', 'OPERATOR']"
61,    /Users/phil/go/src/github.com/jtolds/gls/stack_tags.go:70 +0x32,"['/Users/phil/go/src/github.com/jtolds/gls/stack_tags.go:70', '+', '0x32']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
62,"  github.com/jtolds/gls.markS(0x0, 0xc2080ae9e0)","['github.com/jtolds/gls.markS(0x0,', '0xc2', '0', '80', 'ae9e0', ')']","['DIRECTORY', 'HEX_LITERAL', 'OCTAL_LITERAL', 'DECIMAL_LITERAL', 'IDENTIFIER', 'OPERATOR']"
63,    /Users/phil/go/src/github.com/jtolds/gls/stack_tags.go:21 +0x32,"['/Users/phil/go/src/github.com/jtolds/gls/stack_tags.go:21', '+', '0x32']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
64,"  github.com/jtolds/gls.addStackTag(0x0, 0xc2080ae9e0)","['github.com/jtolds/gls.addStackTag(0x0,', '0xc2', '0', '80', 'ae9e0', ')']","['DIRECTORY', 'HEX_LITERAL', 'OCTAL_LITERAL', 'DECIMAL_LITERAL', 'IDENTIFIER', 'OPERATOR']"
65,    /Users/phil/go/src/github.com/jtolds/gls/stack_tags.go:18 +0x3e,"['/Users/phil/go/src/github.com/jtolds/gls/stack_tags.go:18', '+', '0x3e']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
66,"  github.com/jtolds/gls.(*ContextManager).SetValues(0xc20801e080, 0xc2080b31d0, 0xc2080ae9e0)","['github.com/jtolds/gls.(*ContextManager).SetValues(0xc20801e080,', '0xc2', '0', '80', 'b31d0', ',', '0xc2', '0', '80', 'ae9e0', ')']","['DIRECTORY', 'HEX_LITERAL', 'OCTAL_LITERAL', 'DECIMAL_LITERAL', 'IDENTIFIER', 'OPERATOR', 'HEX_LITERAL', 'OCTAL_LITERAL', 'DECIMAL_LITERAL', 'IDENTIFIER', 'OPERATOR']"
67,    /Users/phil/go/src/github.com/jtolds/gls/context.go:98 +0x503,"['/Users/phil/go/src/github.com/jtolds/gls/context.go:98', '+', '0x5', '03']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL', 'OCTAL_LITERAL']"
68,  github.com/ride/autocomplete.TestSearchForVehicles(0xc20806a480),['github.com/ride/autocomplete.TestSearchForVehicles(0xc20806a480)'],['DIRECTORY']
69,    /Users/phil/go/src/github.com/ride/autocomplete/vehicle_test.go:97 +0x243,"['/Users/phil/go/src/github.com/ride/autocomplete/vehicle_test.go:97', '+', '0x243']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
70,"  testing.tRunner(0xc20806a480, 0x5be890)","['testing.tRunner(0xc20806a480, 0x5be890)']",['FUNCTION_CALL']
71,    /opt/boxen/homebrew/Cellar/go/1.4/libexec/src/testing/testing.go:447 +0xbf,"['/opt/boxen/homebrew/Cellar/go/1.4/libexec/src/testing/testing.go:447', '+', '0xbf']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
72,  created by testing.RunTests,"['created', 'by', 'testing', '.', 'RunTests']","['IDENTIFIER', 'IDENTIFIER', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER']"
73,    /opt/boxen/homebrew/Cellar/go/1.4/libexec/src/testing/testing.go:555 +0xa8b,"['/opt/boxen/homebrew/Cellar/go/1.4/libexec/src/testing/testing.go:555', '+', '0xa8b']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
74,  goroutine 1 [chan receive]:,"['go', 'routine', '1', '[', 'chan', 'receive', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'KEYWORD', 'IDENTIFIER', 'OPERATOR']"
75,"  testing.RunTests(0x49a078, 0x5be800, 0x7, 0x7, 0x67c001)","['testing.RunTests(0x49a078, 0x5be800, 0x7, 0x7, 0x67c001)']",['FUNCTION_CALL']
76,    /opt/boxen/homebrew/Cellar/go/1.4/libexec/src/testing/testing.go:556 +0xad6,"['/opt/boxen/homebrew/Cellar/go/1.4/libexec/src/testing/testing.go:556', '+', '0xad6']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
77,"  testing.(*M).Run(0xc2080463c0, 0x5c9b20)","['testing', '.(*', 'M', ').', 'Run', '(', '0xc2', '0', '80463', 'c0', ',', '0x5c9b2', '0', ')']","['IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'HEX_LITERAL', 'OCTAL_LITERAL', 'DECIMAL_LITERAL', 'IDENTIFIER', 'OPERATOR', 'HEX_LITERAL', 'OCTAL_LITERAL', 'OPERATOR']"
78,    /opt/boxen/homebrew/Cellar/go/1.4/libexec/src/testing/testing.go:485 +0x6c,"['/opt/boxen/homebrew/Cellar/go/1.4/libexec/src/testing/testing.go:485', '+', '0x6c']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
79,  main.main(),['main.main()'],['FUNCTION_CALL']
80,    github.com/ride/autocomplete/_test/_testmain.go:64 +0x1d5,"['github.com/ride/autocomplete/_test/_testmain.go:64', '+', '0x1d5']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
81,  goroutine 208 [chan receive]:,"['go', 'routine', '208', '[', 'chan', 'receive', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'KEYWORD', 'IDENTIFIER', 'OPERATOR']"
82,  github.com/olivere/elastic.(*Client).pinger(0xc208106d40),['github.com/olivere/elastic.(*Client).pinger(0xc208106d40)'],['DIRECTORY']
83,    /Users/phil/go/src/github.com/olivere/elastic/client.go:79 +0x6b,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:79', '+', '0x6b']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
84,  created by github.com/olivere/elastic.NewClient,"['created', 'by', 'github.com/olivere/elastic.NewClient']","['IDENTIFIER', 'IDENTIFIER', 'DIRECTORY']"
85,    /Users/phil/go/src/github.com/olivere/elastic/client.go:60 +0x26e,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:60', '+', '0x26e']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
86,  goroutine 248 [runnable]:,"['go', 'routine', '248', '[', 'runnable', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
87,  net/http.(*persistConn).readLoop(0xc20802e4d0),['net/http.(*persistConn).readLoop(0xc20802e4d0)'],['DIRECTORY']
88,    /opt/boxen/homebrew/Cellar/go/1.4/libexec/src/net/http/transport.go:928 +0x9ce,"['/opt/boxen/homebrew/Cellar/go/1.4/libexec/src/net/http/transport.go:928', '+', '0x9ce']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
89,  created by net/http.(*Transport).dialConn,"['created', 'by', 'net/http.(*Transport).dialConn']","['IDENTIFIER', 'IDENTIFIER', 'DIRECTORY']"
90,    /opt/boxen/homebrew/Cellar/go/1.4/libexec/src/net/http/transport.go:660 +0xc9f,"['/opt/boxen/homebrew/Cellar/go/1.4/libexec/src/net/http/transport.go:660', '+', '0xc9f']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
91,  goroutine 98 [chan receive]:,"['go', 'routine', '98', '[', 'chan', 'receive', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'KEYWORD', 'IDENTIFIER', 'OPERATOR']"
92,  github.com/olivere/elastic.(*Client).pinger(0xc208033e00),['github.com/olivere/elastic.(*Client).pinger(0xc208033e00)'],['DIRECTORY']
93,    /Users/phil/go/src/github.com/olivere/elastic/client.go:79 +0x6b,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:79', '+', '0x6b']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
94,  created by github.com/olivere/elastic.NewClient,"['created', 'by', 'github.com/olivere/elastic.NewClient']","['IDENTIFIER', 'IDENTIFIER', 'DIRECTORY']"
95,    /Users/phil/go/src/github.com/olivere/elastic/client.go:60 +0x26e,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:60', '+', '0x26e']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
96,"  goroutine 17 [syscall, locked to thread]:","['go', 'routine', '17', '[', 'syscall', ',', 'locked', 'to', 'thread', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'IDENTIFIER', 'IDENTIFIER', 'OPERATOR']"
97,  runtime.goexit(),['runtime.goexit()'],['FUNCTION_CALL']
98,    /opt/boxen/homebrew/Cellar/go/1.4/libexec/src/runtime/asm_amd64.s:2232 +0x1,"['/opt/boxen/homebrew/Cellar/go/1.4/libexec/src/runtime/asm_amd64.s:2232', '+', '0x1']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
99,  goroutine 44 [chan receive]:,"['go', 'routine', '44', '[', 'chan', 'receive', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'KEYWORD', 'IDENTIFIER', 'OPERATOR']"
100,  github.com/olivere/elastic.(*Client).pinger(0xc2080332c0),['github.com/olivere/elastic.(*Client).pinger(0xc2080332c0)'],['DIRECTORY']
101,    /Users/phil/go/src/github.com/olivere/elastic/client.go:79 +0x6b,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:79', '+', '0x6b']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
102,  created by github.com/olivere/elastic.NewClient,"['created', 'by', 'github.com/olivere/elastic.NewClient']","['IDENTIFIER', 'IDENTIFIER', 'DIRECTORY']"
103,    /Users/phil/go/src/github.com/olivere/elastic/client.go:60 +0x26e,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:60', '+', '0x26e']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
104,  goroutine 249 [select]:,"['go', 'routine', '249', '[', 'select', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'KEYWORD', 'OPERATOR']"
105,  net/http.(*persistConn).writeLoop(0xc20802e4d0),['net/http.(*persistConn).writeLoop(0xc20802e4d0)'],['DIRECTORY']
106,    /opt/boxen/homebrew/Cellar/go/1.4/libexec/src/net/http/transport.go:945 +0x41d,"['/opt/boxen/homebrew/Cellar/go/1.4/libexec/src/net/http/transport.go:945', '+', '0x41d']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
107,  created by net/http.(*Transport).dialConn,"['created', 'by', 'net/http.(*Transport).dialConn']","['IDENTIFIER', 'IDENTIFIER', 'DIRECTORY']"
108,    /opt/boxen/homebrew/Cellar/go/1.4/libexec/src/net/http/transport.go:661 +0xcbc,"['/opt/boxen/homebrew/Cellar/go/1.4/libexec/src/net/http/transport.go:661', '+', '0xcbc']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
109,  goroutine 54 [chan receive]:,"['go', 'routine', '54', '[', 'chan', 'receive', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'KEYWORD', 'IDENTIFIER', 'OPERATOR']"
110,  github.com/olivere/elastic.(*Client).pinger(0xc208032f80),['github.com/olivere/elastic.(*Client).pinger(0xc208032f80)'],['DIRECTORY']
111,    /Users/phil/go/src/github.com/olivere/elastic/client.go:79 +0x6b,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:79', '+', '0x6b']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
112,  created by github.com/olivere/elastic.NewClient,"['created', 'by', 'github.com/olivere/elastic.NewClient']","['IDENTIFIER', 'IDENTIFIER', 'DIRECTORY']"
113,    /Users/phil/go/src/github.com/olivere/elastic/client.go:60 +0x26e,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:60', '+', '0x26e']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
114,  goroutine 76 [chan receive]:,"['go', 'routine', '76', '[', 'chan', 'receive', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'KEYWORD', 'IDENTIFIER', 'OPERATOR']"
115,  github.com/olivere/elastic.(*Client).pinger(0xc208032e00),['github.com/olivere/elastic.(*Client).pinger(0xc208032e00)'],['DIRECTORY']
116,    /Users/phil/go/src/github.com/olivere/elastic/client.go:79 +0x6b,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:79', '+', '0x6b']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
117,  created by github.com/olivere/elastic.NewClient,"['created', 'by', 'github.com/olivere/elastic.NewClient']","['IDENTIFIER', 'IDENTIFIER', 'DIRECTORY']"
118,    /Users/phil/go/src/github.com/olivere/elastic/client.go:60 +0x26e,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:60', '+', '0x26e']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
119,  goroutine 250 [chan receive]:,"['go', 'routine', '250', '[', 'chan', 'receive', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'KEYWORD', 'IDENTIFIER', 'OPERATOR']"
120,  github.com/olivere/elastic.(*Client).pinger(0xc208106c40),['github.com/olivere/elastic.(*Client).pinger(0xc208106c40)'],['DIRECTORY']
121,    /Users/phil/go/src/github.com/olivere/elastic/client.go:79 +0x6b,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:79', '+', '0x6b']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
122,  created by github.com/olivere/elastic.NewClient,"['created', 'by', 'github.com/olivere/elastic.NewClient']","['IDENTIFIER', 'IDENTIFIER', 'DIRECTORY']"
123,    /Users/phil/go/src/github.com/olivere/elastic/client.go:60 +0x26e,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:60', '+', '0x26e']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
124,  goroutine 120 [chan receive]:,"['go', 'routine', '120', '[', 'chan', 'receive', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'KEYWORD', 'IDENTIFIER', 'OPERATOR']"
125,  github.com/olivere/elastic.(*Client).pinger(0xc208106b00),['github.com/olivere/elastic.(*Client).pinger(0xc208106b00)'],['DIRECTORY']
126,    /Users/phil/go/src/github.com/olivere/elastic/client.go:79 +0x6b,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:79', '+', '0x6b']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
127,  created by github.com/olivere/elastic.NewClient,"['created', 'by', 'github.com/olivere/elastic.NewClient']","['IDENTIFIER', 'IDENTIFIER', 'DIRECTORY']"
128,    /Users/phil/go/src/github.com/olivere/elastic/client.go:60 +0x26e,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:60', '+', '0x26e']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
129,  goroutine 142 [chan receive]:,"['go', 'routine', '142', '[', 'chan', 'receive', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'KEYWORD', 'IDENTIFIER', 'OPERATOR']"
130,  github.com/olivere/elastic.(*Client).pinger(0xc208106e00),['github.com/olivere/elastic.(*Client).pinger(0xc208106e00)'],['DIRECTORY']
131,    /Users/phil/go/src/github.com/olivere/elastic/client.go:79 +0x6b,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:79', '+', '0x6b']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
132,  created by github.com/olivere/elastic.NewClient,"['created', 'by', 'github.com/olivere/elastic.NewClient']","['IDENTIFIER', 'IDENTIFIER', 'DIRECTORY']"
133,    /Users/phil/go/src/github.com/olivere/elastic/client.go:60 +0x26e,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:60', '+', '0x26e']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
134,  goroutine 164 [chan receive]:,"['go', 'routine', '164', '[', 'chan', 'receive', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'KEYWORD', 'IDENTIFIER', 'OPERATOR']"
135,  github.com/olivere/elastic.(*Client).pinger(0xc208106b80),['github.com/olivere/elastic.(*Client).pinger(0xc208106b80)'],['DIRECTORY']
136,    /Users/phil/go/src/github.com/olivere/elastic/client.go:79 +0x6b,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:79', '+', '0x6b']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
137,  created by github.com/olivere/elastic.NewClient,"['created', 'by', 'github.com/olivere/elastic.NewClient']","['IDENTIFIER', 'IDENTIFIER', 'DIRECTORY']"
138,    /Users/phil/go/src/github.com/olivere/elastic/client.go:60 +0x26e,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:60', '+', '0x26e']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
139,  goroutine 186 [chan receive]:,"['go', 'routine', '186', '[', 'chan', 'receive', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'KEYWORD', 'IDENTIFIER', 'OPERATOR']"
140,  github.com/olivere/elastic.(*Client).pinger(0xc208106d00),['github.com/olivere/elastic.(*Client).pinger(0xc208106d00)'],['DIRECTORY']
141,    /Users/phil/go/src/github.com/olivere/elastic/client.go:79 +0x6b,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:79', '+', '0x6b']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
142,  created by github.com/olivere/elastic.NewClient,"['created', 'by', 'github.com/olivere/elastic.NewClient']","['IDENTIFIER', 'IDENTIFIER', 'DIRECTORY']"
143,    /Users/phil/go/src/github.com/olivere/elastic/client.go:60 +0x26e,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:60', '+', '0x26e']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
144,  goroutine 230 [chan receive]:,"['go', 'routine', '230', '[', 'chan', 'receive', ']:']","['KEYWORD', 'IDENTIFIER', 'DECIMAL_LITERAL', 'OPERATOR', 'KEYWORD', 'IDENTIFIER', 'OPERATOR']"
145,  github.com/olivere/elastic.(*Client).pinger(0xc208106dc0),['github.com/olivere/elastic.(*Client).pinger(0xc208106dc0)'],['DIRECTORY']
146,    /Users/phil/go/src/github.com/olivere/elastic/client.go:79 +0x6b,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:79', '+', '0x6b']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
147,  created by github.com/olivere/elastic.NewClient,"['created', 'by', 'github.com/olivere/elastic.NewClient']","['IDENTIFIER', 'IDENTIFIER', 'DIRECTORY']"
148,    /Users/phil/go/src/github.com/olivere/elastic/client.go:60 +0x26e,"['/Users/phil/go/src/github.com/olivere/elastic/client.go:60', '+', '0x26e']","['DIRECTORY', 'OPERATOR', 'HEX_LITERAL']"
149,"

Possibly the more important part of that backtrace is this: 


  Error 400: ElasticsearchIllegalArgumentException[No feature for name [vehicle]] 


So, not sure what the heck is going wrong here. I have a 1 second timeout on the index, because this client doesn't support ""wait for green"" logic [yet].

","['Possibly', 'the', 'more', 'important', 'part', 'of', 'that', 'backtrace', 'is', 'this:', 'Error', '400:', 'ElasticsearchIllegalArgumentException[No', 'feature', 'for', 'name', '[vehicle]]', 'So,', 'not', 'sure', 'what', 'the', 'heck', 'is', 'going', 'wrong', 'here.', 'I', 'have', 'a', '1', 'second', 'timeout', 'on', 'the', 'index,', 'because', 'this', 'client', ""doesn't"", 'support', '""wait', 'for', 'green""', 'logic', '[yet].']","['RB', 'DT', 'RBR', 'JJ', 'NN', 'IN', 'DT', 'NN', 'VBZ', 'JJ', 'NNP', 'CD', 'NNP', 'NN', 'IN', 'NN', 'NNP', 'NNP', 'RB', 'JJ', 'WP', 'DT', 'NN', 'VBZ', 'VBG', 'JJ', 'NN', 'PRP', 'VBP', 'DT', 'CD', 'JJ', 'NN', 'IN', 'DT', 'NN', 'IN', 'DT', 'NN', 'VBZ', 'VB', 'NN', 'IN', 'NN', 'NN', 'NN']"
150,func ResetVehicleIndex(client *elastic.Client) (err error) {,"['func', 'ResetVehicleIndex', '(', 'client', '*', 'elastic', '.', 'Client', ')', '(', 'err', 'error', ')', '{']","['KEYWORD', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'OPERATOR', 'IDENTIFIER', 'IDENTIFIER', 'OPERATOR', 'OPERATOR']"
151,"    if _, err = client.DeleteIndex(vehicleIndex).Do(); err != nil {","['if', '_', ',', 'err', '=', 'client.DeleteIndex(vehicleIndex).Do()', ';', 'err', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'FUNCTION_CALL', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
152,        return,['return'],['KEYWORD']
153,    },['}'],['OPERATOR']
154,"    if _, err = EnsureVehicleIndex(client); err != nil {","['if', '_', ',', 'err', '=', 'EnsureVehicleIndex', '(', 'client', ');', 'err', '!=', 'nil', '{']","['KEYWORD', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR', 'IDENTIFIER', 'OPERATOR']"
155,        return,['return'],['KEYWORD']
156,    },['}'],['OPERATOR']
157,"    // TODO: This is awful. Switch to ""wait for green"" when elastic client supports it","['//', 'TODO:', 'This', 'is', 'awful.', 'Switch', 'to', '""wait', 'for', 'green""', 'when', 'elastic', 'client', 'supports', 'it']","['COMMENT', 'NN', 'DT', 'VBZ', 'JJ', 'NNP', 'TO', 'VB', 'IN', 'NN', 'WRB', 'JJ', 'NN', 'VBZ', 'PRP']"
158,    time.Sleep(time.Second * 1),['time.Sleep(time.Second * 1)'],['FUNCTION_CALL']
159,    return nil,"['return', 'nil']","['KEYWORD', 'IDENTIFIER']"
160,},['}'],['OPERATOR']
161,"

This has worked for most other tests, as elasticsearch seems to get ready in a second or so, but these tests are consistently erroring regardless of the wait time in that bit of code.

Any ideas? I might need to edit the question to add more code or better explanations, but I'll reply super quickly to any questions especially if you ping me on Twitter @philsturgeon. I'm really stuck on this.
","['This', 'has', 'worked', 'for', 'most', 'other', 'tests,', 'as', 'elasticsearch', 'seems', 'to', 'get', 'ready', 'in', 'a', 'second', 'or', 'so,', 'but', 'these', 'tests', 'are', 'consistently', 'erroring', 'regardless', 'of', 'the', 'wait', 'time', 'in', 'that', 'bit', 'of', 'code.', 'Any', 'ideas?', 'I', 'might', 'need', 'to', 'edit', 'the', 'question', 'to', 'add', 'more', 'code', 'or', 'better', 'explanations,', 'but', ""I'll"", 'reply', 'super', 'quickly', 'to', 'any', 'questions', 'especially', 'if', 'you', 'ping', 'me', 'on', 'Twitter', '@philsturgeon.', ""I'm"", 'really', 'stuck', 'on', 'this.']","['DT', 'VBZ', 'VBN', 'IN', 'JJS', 'JJ', 'NN', 'IN', 'NN', 'VBZ', 'TO', 'VB', 'JJ', 'IN', 'DT', 'JJ', 'CC', 'JJ', 'CC', 'DT', 'NNS', 'VBP', 'RB', 'VBG', 'NN', 'IN', 'DT', 'NN', 'NN', 'IN', 'DT', 'NN', 'IN', 'NN', 'NNP', 'NN', 'PRP', 'MD', 'VB', 'TO', 'VB', 'DT', 'NN', 'TO', 'VB', 'JJR', 'NN', 'CC', 'JJR', 'NN', 'CC', 'NNP', 'VBP', 'JJ', 'RB', 'TO', 'DT', 'NNS', 'RB', 'IN', 'PRP', 'VBG', 'PRP', 'IN', 'NNP', 'NNP', 'NNP', 'RB', 'VBD', 'IN', 'NN']"
